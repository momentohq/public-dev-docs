"use strict";(globalThis.webpackChunkmomento_docs=globalThis.webpackChunkmomento_docs||[]).push([[6982],{22707:(e,n,t)=>{t.d(n,{A:()=>T});var r=t(96540),a=t(34164),i=t(79872),o=t(44319),c=t(56347),s=t(94280),l=t(73024),d=t(58417),u=t(44031);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function v({queryString:e=!1,groupId:n}){const t=(0,c.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=m(e),[o,c]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[l,d]=v({queryString:t,groupId:a}),[h,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,u.Dv)(n);return[t,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:a}),x=(()=>{const e=l??h;return p({value:e,tabValues:i})?e:null})();(0,s.A)((()=>{x&&c(x)}),[x]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),g(e)}),[d,g,i]),tabValues:i}}var x=t(46916);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var I=t(74848);function b({className:e,block:n,selectedValue:t,selectValue:r,tabValues:i}){const c=[],{blockElementScrollPositionUntilNextRender:s}=(0,o.a_)(),l=e=>{const n=e.currentTarget,a=c.indexOf(n),o=i[a].value;o!==t&&(s(n),r(o))},d=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,I.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:r})=>(0,I.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{c.push(e)},onKeyDown:d,onClick:l,...r,className:(0,a.A)("tabs__item",j.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function f({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,I.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function y(e){const n=g(e);return(0,I.jsxs)("div",{className:(0,a.A)(i.G.tabs.container,"tabs-container",j.tabList),children:[(0,I.jsx)(b,{...n,...e}),(0,I.jsx)(f,{...n,...e})]})}function T(e){const n=(0,x.A)();return(0,I.jsx)(y,{...e,children:h(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var r=t(96540);const a={},i=r.createContext(a);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},53632:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var r=t(34164);const a={tabItem:"tabItem_Ymn6"};var i=t(74848);function o({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,t),hidden:n,children:e})}},55337:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"media-storage/concurrency/devices","title":"Concurrency tracking","description":"Learn how to track and manage concurrent devices for an account","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/media-storage/concurrency/devices.md","sourceDirName":"media-storage/concurrency","slug":"/media-storage/concurrency/devices","permalink":"/ja/media-storage/concurrency/devices","draft":false,"unlisted":false,"editUrl":"https://github.com/momentohq/public-dev-docs/tree/main/docs/media-storage/concurrency/devices.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"sidebar_label":"Device management","title":"Concurrency tracking","description":"Learn how to track and manage concurrent devices for an account","hide_title":true,"keywords":["momento","media storage","zero buffer rate","zbr","streaming","live","elemental","serverless","metrics","concurrency tracking"]},"sidebar":"mediastorageSidebar","previous":{"title":"Device management","permalink":"/ja/media-storage/concurrency/account-level"},"next":{"title":"Entitlements"}}');var a=t(74848),i=t(28453),o=t(22707),c=t(53632);const s={sidebar_position:2,sidebar_label:"Device management",title:"Concurrency tracking",description:"Learn how to track and manage concurrent devices for an account",hide_title:!0,keywords:["momento","media storage","zero buffer rate","zbr","streaming","live","elemental","serverless","metrics","concurrency tracking"]},l="\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u540c\u6642\u4f7f\u7528\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u8de1",d={},u=[{value:"\u6982\u8981",id:"\u6982\u8981",level:2},{value:"\u540c\u6642\u5b9f\u884c\u30c8\u30e9\u30c3\u30ab\u30fc\u306e\u69cb\u7bc9",id:"\u540c\u6642\u5b9f\u884c\u30c8\u30e9\u30c3\u30ab\u30fc\u306e\u69cb\u7bc9",level:2},{value:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f",id:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f",level:3},{value:"\u30c7\u30d0\u30a4\u30b9\u30fb\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8",id:"\u30c7\u30d0\u30a4\u30b9\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8",level:3},{value:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9",id:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9",level:3},{value:"\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc",id:"\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u540c\u6642\u4f7f\u7528\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u8de1",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u540c\u6642\u4f7f\u7528\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u8de1"})}),"\n",(0,a.jsxs)(n.p,{children:["\u30a2\u30af\u30bb\u30b9\u7ba1\u7406\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u78ba\u4fdd\u3001\u30ea\u30bd\u30fc\u30b9\u306e\u6700\u9069\u5316\u304c\u6700\u512a\u5148\u3055\u308c\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u3054\u3068\u306e\u540c\u6642\u30c7\u30d0\u30a4\u30b9\u3084\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u8ffd\u8de1\u304c\u4e0d\u53ef\u6b20\u3067\u3059\u3002\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u30fb\u30d9\u30fc\u30b9\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u307e\u305f\u306f\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5236\u9650\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3078\u306e\u540c\u6642\u30a2\u30af\u30bb\u30b9\u3092\u6307\u5b9a\u3055\u308c\u305f\u30c7\u30d0\u30a4\u30b9\u6570\u306b\u5236\u9650\u3057\u307e\u3059\u3002",(0,a.jsx)(n.strong,{children:"\u901a\u8ca8\u8ffd\u8de1"}),"\u306f\u307e\u305f\u3001\u4e0d\u6b63\u306a\u5171\u6709\u3092\u9632\u6b62\u3059\u308b\u3053\u3068\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3001\u6f5c\u5728\u7684\u306a\u60aa\u7528\u304b\u3089\u30b5\u30fc\u30d3\u30b9\u3092\u4fdd\u8b77\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u307e\u305f\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306e\u9700\u8981\u306b\u57fa\u3065\u3044\u3066\u52d5\u7684\u306b\u30ea\u30bd\u30fc\u30b9\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u7279\u306b\u30e1\u30c7\u30a3\u30a2\u3084\u30a8\u30f3\u30bf\u30fc\u30c6\u30a4\u30e1\u30f3\u30c8\u306a\u3069\u3001\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u591a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u304a\u3051\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u6700\u9069\u5316\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:["\u4ee5\u4e0b\u306b\u793a\u3059\u30d1\u30bf\u30fc\u30f3\u306f\u3001Momento\u304c\u8907\u96d1\u306a\u30a4\u30f3\u30d5\u30e9\u30b9\u30c8\u30e9\u30af\u30c1\u30e3\u3092\u5fc5\u8981\u3068\u305b\u305a\u306b",(0,a.jsx)(n.strong,{children:"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30fb\u30bb\u30c3\u30b7\u30e7\u30f3\u30fb\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0"}),"\u3092\u63d0\u4f9b\u3059\u308b\u65b9\u6cd5\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u6982\u8981",children:"\u6982\u8981"}),"\n",(0,a.jsx)(n.mermaid,{value:'flowchart TD\n    subgraph Account\n        A[Account ID]\n    end\n    subgraph Momento\n        B1[Store Heartbeats in Cache Dictionary]\n        B2[Evaluate Unique Devices on Entitlement Check]\n    end\n    subgraph Device\n        C1[Device 1]\n        C2[Device 2]\n        C3[Device N]\n    end\n\n    C1 -- "Heartbeat \u27a1 Account ID + Timestamp" --\x3e B1\n    C2 -- "Heartbeat \u27a1 Account ID + Timestamp" --\x3e B1\n    C3 -- "Heartbeat \u27a1 Account ID + Timestamp" --\x3e B1\n\n    B1 -- "Capped to Most Recent N Entries" --\x3e B2\n    A -- "Evaluate Active Concurrency" --\x3e B2\n\n    Account -.->|Check Entitlement| A'}),"\n",(0,a.jsxs)(n.p,{children:["Momento\u3067\u540c\u6642\u5b9f\u884c\u3092\u76e3\u8996\u3059\u308b\u306b\u306f\u3001\u63a5\u7d9a\u3055\u308c\u305f\u30d7\u30ec\u30a4\u30e4\u30fc\u304b\u3089\u767a\u4fe1\u3055\u308c\u308b",(0,a.jsx)(n.a,{href:"/media-storage/enhancements/heartbeats",children:"heartbeats"}),"\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3001Momento\u306e",(0,a.jsx)(n.a,{href:"/cache/develop/basics/datatypes#dictionaries",children:"\u30ad\u30e3\u30c3\u30b7\u30e5\u8f9e\u66f8"}),"\u3092\u7ba1\u7406\u3057\u3001\u6307\u5b9a\u3055\u308c\u305f\u9593\u9694\u3067\u4e00\u610f\u306e\u30d7\u30ec\u30fc\u30e4\u30fc\u304b\u3089\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u8ffd\u8de1\u3057\u307e\u3059\u3002",(0,a.jsx)(n.a,{href:"/media-storage/entitlements/about",children:"\u30a8\u30f3\u30bf\u30a4\u30c8\u30eb\u30e1\u30f3\u30c8\u30c1\u30a7\u30c3\u30af"}),"\u306e\u9593\u306b\u3001\u6700\u5f8c\u306e",(0,a.jsx)(n.em,{children:"\u5b8c\u5168\u306a"}),"\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u8f9e\u66f8\u304c\u30d5\u30a7\u30c3\u30c1\u3055\u308c\u3001\u540c\u6642\u5b9f\u884c\u30ab\u30a6\u30f3\u30c8\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u540c\u6642\u5b9f\u884c\u8ffd\u8de1\u306e\u4e3b\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Device"})," - \u5404\u30c7\u30d0\u30a4\u30b9\u307e\u305f\u306f\u30b9\u30c8\u30ea\u30fc\u30e0\u306f\u3001",(0,a.jsx)(n.a,{href:"/topics",children:"Momento Topics"}),"\u3092\u4ecb\u3057\u3066\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Momento"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Cache"})," - \u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6700\u8fd1\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u3001\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30d9\u30fc\u30b9\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u8f9e\u66f8\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Auth"})," - \u30c8\u30fc\u30af\u30f3\u306b\u30a2\u30ab\u30a6\u30f3\u30c8ID\u3092\u76f4\u63a5\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u3066\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u7528\u306e",(0,a.jsx)(n.a,{href:"/cache/develop/authentication/tokens",children:"\u30bb\u30c3\u30b7\u30e7\u30f3\u30c8\u30fc\u30af\u30f3"}),"\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Account"})," - \u30b7\u30b9\u30c6\u30e0\u306e\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8868\u3057\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u540c\u6642\u5b9f\u884c\u30c8\u30e9\u30c3\u30ab\u30fc\u306e\u69cb\u7bc9",children:"\u540c\u6642\u5b9f\u884c\u30c8\u30e9\u30c3\u30ab\u30fc\u306e\u69cb\u7bc9"}),"\n",(0,a.jsx)(n.p,{children:"\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u306f4\u3064\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u5fc5\u8981\u3067\u3059\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f"}),"\n",(0,a.jsx)(n.li,{children:"\u30c7\u30d0\u30a4\u30b9\u30fb\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8"}),"\n",(0,a.jsx)(n.li,{children:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9"}),"\n",(0,a.jsx)(n.li,{children:"\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f",children:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f"}),"\n",(0,a.jsx)(n.p,{children:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f\u306f\u3001\u9650\u5b9a\u3055\u308c\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u6301\u3064\u77ed\u547d\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30c8\u30fc\u30af\u30f3\u3092\u6255\u3044\u51fa\u3059\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\u3053\u308c\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u3001\u901a\u5e38\u306fAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u3001\u52d5\u7684\u306b\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30c8\u30fc\u30af\u30f3\u3092\u751f\u6210\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u30b3\u30fc\u30c9\u306e\u30b9\u30cb\u30da\u30c3\u30c8\u3067\u3059\u3002\u3053\u306e\u30b3\u30fc\u30c9\u306fAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u306e\u4e2d\u306b\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const scope = { permissions: [\n  {\n    role: 'publishonly',\n    cache: 'video',\n    topic: 'heartbeat'\n  }\n]};\n\nconst response = await authClient.generateDisposableToken(scope, ExpiresIn.minutes(30), { tokenId: accountId });\nif(response.type === GenerateDisposableTokenResponse.Success){\n  return { token: response.authToken };\n}\n"})})}),(0,a.jsx)(c.A,{value:"go",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'resp, err := authClient.GenerateDisposableToken(ctx, &momento.GenerateDisposableTokenRequest{\n\t\tExpiresIn: utils.ExpiresInMinutes(30),\n\t\tScope: momento.TopicPublishOnly(\n\t\t\tmomento.CacheName{Name: "video"},\n\t\t\tmomento.TopicName{Name: "heartbeat"},\n\t\t),\n\t\tProps: momento.DisposableTokenProps{\n\t\t\tTokenId: &req.PlayerID,\n\t\t},\n\t})\n\n\tif err != nil {\n\t\thttp.Error(w, "Failed to generate token", http.StatusInternalServerError)\n\t\treturn\n\t}\n\n  switch r := resp.(type) {\n\tcase *auth_resp.GenerateDisposableTokenSuccess:\n\t\treturn r.ApiKey\n\tdefault:\n\t\thttp.Error(w, "Failed to generate token", http.StatusInternalServerError)\n\t}\n'})})}),(0,a.jsx)(c.A,{value:"dotnet",label:".NET",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'var response = await _authClient.GenerateDispableTokenAsync(\n  DisposableTokenScopes.TopicPublishOnly("video", "heartbeat"),\n  ExpiresIn.Minutes(30)\n);\n\nreturn response.AuthToken;\n'})})})]}),"\n",(0,a.jsxs)(n.p,{children:["\u4e0a\u306e\u30b9\u30cb\u30da\u30c3\u30c8\u3067\u306f\u3001\u30e6\u30fc\u30b6\u304c ",(0,a.jsx)(n.code,{children:"heartbeat"})," \u30c8\u30d4\u30c3\u30af\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092 ",(0,a.jsx)(n.em,{children:"\u767a\u884c"})," \u3067\u304d\u308b\u3088\u3046\u306b\u660e\u793a\u7684\u306a\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u304c\u30cf\u30f3\u30c9\u30e9\u3068\u901a\u4fe1\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\u30c8\u30fc\u30af\u30f3\u306f30\u5206\u9593\u6709\u52b9\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u306e ",(0,a.jsx)(n.code,{children:"accountId"})," \u304c\u30c8\u30fc\u30af\u30f3\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u57cb\u3081\u8fbc\u307e\u308c\u305f\u30a2\u30ab\u30a6\u30f3\u30c8ID\u306f\u3001\u30b5\u30fc\u30d0\u4e0a\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u8cfc\u8aad\u306e\u5f15\u6570\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"\u5b9f\u904b\u7528\u30b7\u30ca\u30ea\u30aa\u3067\u306f\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306f\u65e2\u5b58\u306e authZ \u30e1\u30ab\u30cb\u30ba\u30e0\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3001\u751f\u6210\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092 claim \u3068\u3057\u3066\u8fd4\u3059\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3053\u3053\u3067\u306f\u3001\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u30b9\u30cb\u30da\u30c3\u30c8\u306e\u524d\u306b\u3001\u30e6\u30fc\u30b6\u304c\u8a8d\u8a3c\u3055\u308c\u3001\u305d\u306e\u30a2\u30ab\u30a6\u30f3\u30c8 ID \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3001\u305d\u306e\u30e6\u30fc\u30b6\u304c\u898b\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u5b89\u5168\u306b\u8b58\u5225\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002"})}),"\n",(0,a.jsx)(n.h3,{id:"\u30c7\u30d0\u30a4\u30b9\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8",children:"\u30c7\u30d0\u30a4\u30b9\u30fb\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8"}),"\n",(0,a.jsx)(n.p,{children:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f\u304c\u8a2d\u7f6e\u3055\u308c\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u30c7\u30d0\u30a4\u30b9\u3067\u4f7f\u7528\u3057\u3066\u3001\u5b9a\u671f\u7684\u306b\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u767a\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u306b\u306f\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u5fdc\u3058\u3066\u3001\u30e1\u30c7\u30a3\u30a2\u3001\u30d7\u30ec\u30fc\u30e4\u30fc\u3001\u30c7\u30d0\u30a4\u30b9\u306b\u95a2\u3059\u308b\u3042\u3089\u3086\u308b\u60c5\u5831\u3092\u542b\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u7c21\u5358\u306a\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc\u3067\u306f\u3001\u6700\u5c0f\u9650\u306e\u60c5\u5831\u3092\u63d0\u4f9b\u3057\u3001\u30c7\u30d0\u30a4\u30b9ID\u306e\u307f\u3092\u542b\u3081\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002"}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"sdk",label:"Momento Web SDK (React)",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import React, { useEffect, useState, useMemo } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { TopicClient, CredentialProvider } from '@gomomento/sdk-web';\n\nconst HEARTBEAT_INTERVAL_MS = 5000;\n\nfunction getMediaIdFromQuery() {\n  const params = new URLSearchParams(window.location.search);\n  return params.get('id');\n}\n\nfunction Device() {\n  const [topicClient, setTopicClient] = useState(null);\n\n  const mediaId = useMemo(() => getMediaIdFromQuery(), []);\n  const deviceId = useMemo(() => {\n    const savedDeviceId = localStorage.getItem('deviceId');\n    if (savedDeviceId) return savedDeviceId;\n\n    const newDeviceId = crypto.randomUUID();\n    localStorage.setItem('deviceId', newDeviceId);\n    return newDeviceId;\n  }, []);\n\n  const message = useMemo(() => JSON.stringify({ deviceId, mediaId }), [deviceId, mediaId]);\n\n  useEffect(() => {\n    async function initTopicClient() {\n      const response = await fetch('http://localhost:3000/tokens', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ accountId: 'account-id' }),\n      });\n      if (response.ok) {\n        const { token } = await response.json();\n        const topicClient = new TopicClient({\n          credentialProvider: CredentialProvider.fromString(token),\n        });\n        setTopicClient(topicClient);\n      }\n    }\n\n    initTopicClient();\n  }, [mediaId]);\n\n  useEffect(() => {\n    if (topicClient) {\n      const intervalId = setInterval(() => {\n        topicClient.publish('video', 'heartbeat', message);\n      }, HEARTBEAT_INTERVAL_MS);\n\n      return () => clearInterval(intervalId);\n    }\n  }, [topicClient, mediaId, message]);\n\n  return (\n    <div>\n      <h2>Device {deviceId}: {topicClient ? 'Connected' : 'Not Connected'}</h2>\n    </div>\n  );\n}\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<Device />);\n\n"})})}),(0,a.jsx)(c.A,{value:"http",label:"HTTP only",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:"<!DOCTYPE html>\n<html lang=\"en\">\n\n<body>\n  <div id=\"root\">\n    <h2>Device <span id=\"deviceId\"></span>: <span id=\"status\">Not Connected</span></h2>\n  </div>\n\n  <script>\n    const HEARTBEAT_INTERVAL_MS = 5000;\n    const mediaId = getMediaIdFromQuery();\n    const deviceId = getDeviceId();\n    const message = JSON.stringify({ deviceId, mediaId });\n    let token;\n\n    function getMediaIdFromQuery() {\n      const params = new URLSearchParams(window.location.search);\n      return params.get('id');\n    }\n\n    function getDeviceId() {\n      let deviceId = localStorage.getItem('deviceId');\n      if (!deviceId) {\n        deviceId = crypto.randomUUID();\n        localStorage.setItem('deviceId', deviceId);\n      }\n\n      document.getElementById('deviceId').innerText = deviceId;\n      return deviceId;\n    }\n\n    async function sendHeartbeat() {\n      await fetch(`<MOMENTO_REGION_ENDPOINT>/topics/video/heartbeat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': token\n        },\n        body: message,\n      });\n    }\n\n    async function getToken() {\n      const response = await fetch('http://localhost:3000/tokens', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ accountId: 'account-id' }),\n      });\n\n      if (response.ok) {\n        const { token } = await response.json();\n        return token;\n      }\n    }\n\n    function startHeartbeat() {\n      setInterval(() => {\n        sendHeartbeat();\n      }, HEARTBEAT_INTERVAL_MS);\n    }\n\n    async function init() {\n      const statusElement = document.getElementById('status');\n      token = await getToken();\n      if (token) {\n        statusElement.innerText = 'Connected';\n        startHeartbeat();\n      } else {\n        statusElement.innerText = 'Failed to Connect';\n      }\n    }\n\n    init();\n  <\/script>\n</body>\n</html>\n\n"})})})]}),"\n",(0,a.jsxs)(n.p,{children:["\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u3001\u30d7\u30ec\u30fc\u30e4html\u306b\u306f\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30fb\u30ed\u30b8\u30c3\u30af\u3057\u304b\u542b\u307e\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308bAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5f8c\u308d\u306b\u7f6e\u3044\u305f\u30b9\u30c6\u30c3\u30d71\u306e\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u30d7\u30ec\u30fc\u30e4\u30fc\u304c\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9ID\u3068\u30e1\u30c7\u30a3\u30a2ID\u3092",(0,a.jsx)(n.code,{children:"heartbeat"}),"\u30c8\u30d4\u30c3\u30af\u306b\u516c\u958b\u3057\u59cb\u3081\u307e\u3059\u3002\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u306f5\u79d2\u3054\u3068\u306b\u9001\u4fe1\u3055\u308c\u308b\u306e\u3067\u3001\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\u306f\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8ffd\u8de1\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u30c7\u30d0\u30a4\u30b9\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u306e\u30b3\u30fc\u30c9\u3067\u6ce8\u610f\u3059\u3079\u304d\u70b9\u304c2\u3064\u3042\u308a\u307e\u3059\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u30c8\u30fc\u30af\u30f3\u81ea\u52d5\u8ca9\u58f2\u6a5f\u306b\u4f9b\u7d66\u3055\u308c\u308b\u30a2\u30ab\u30a6\u30f3\u30c8ID\u306f\u30cf\u30fc\u30c9\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002"}),"\n",(0,a.jsxs)(n.li,{children:["Momento HTTP API\u3092\u547c\u3073\u51fa\u3059\u5834\u5408\u3001\u30d9\u30fc\u30b9URL\u306f",(0,a.jsx)(n.a,{href:"/platform/regions",children:"region based"}),"\u3067\u3059\u3002\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u3092\u3001\u4f7f\u7528\u3059\u308b\u30b1\u30fc\u30b9\u306b\u9069\u3057\u305f\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002Momento SDK\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u30ea\u30fc\u30b8\u30e7\u30f3\u51e6\u7406\u306f\u7ba1\u7406\u3055\u308c\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.em,{children:["\u30e1\u30c0\u30eb\u81ea\u52d5\u8ca9\u58f2\u6a5f\u306e\u5b8c\u5168\u306a\u4f8b\u306b\u3064\u3044\u3066\u306f\u3001",(0,a.jsx)(n.a,{href:"/media-storage/enhancements/live-reactions#step-1-building-a-token-vending-machine",children:"\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u3054\u89a7\u304f\u3060\u3055\u3044"}),"."]})}),"\n",(0,a.jsx)(n.h3,{id:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9",children:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u30cf\u30f3\u30c9\u30e9"}),"\n",(0,a.jsxs)(n.p,{children:["\u7279\u5b9a\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30c7\u30d0\u30a4\u30b9\u306f\u3001\u4e00\u9023\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u8f9e\u66f8\u3067\u8ffd\u8de1\u3055\u308c\u307e\u3059\u3002\u4e00\u610f\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30fb\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u6642\u9593\u9593\u9694\u306b\u308f\u305f\u3063\u3066\u30c7\u30d0\u30a4\u30b9\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u8ffd\u8de1\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u6642\u9593\u9593\u9694\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u8981\u4ef6\u306b\u5fdc\u3058\u3066\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f\u3001\u30b3\u30f3\u30ab\u30ec\u30f3\u30b7\u30fc\u3092",(0,a.jsx)(n.em,{children:"1\u5206\u306b1\u56de"}),"\u8a55\u4fa1\u3057\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:["\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u30fb\u30d9\u30fc\u30b9\u306e\u8f9e\u66f8\u306e\u547d\u540d\u898f\u5247\u306f ",(0,a.jsx)(n.code,{children:"{accountId}-{intervalTime}"})," \u3067\u3059\u3002\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u6642\u9593\u3092\u8a08\u7b97\u3059\u308b\u306b\u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u5206\u306e\u6642\u9593\u3092\u6570\u5024\u3067\u8868\u3057\u3001\u5207\u308a\u6368\u3066\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"function getIntervalMarker(minutesBack = 0) {\n  const now = new Date();\n  now.setTime(now.getTime() - minutesBack * 60000);\n  now.setSeconds(0, 0);\n  return now.getTime();\n}\n"})})}),(0,a.jsx)(c.A,{value:"go",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:"func getIntervalMarker(minutesBack int) int64 {\n\tnow := time.Now().Add(-time.Duration(minutesBack) * time.Minute)\n\trounded := time.Date(now.Year(), now.Month(), now.Day(), now.Hour(), now.Minute(), 0, 0, now.Location())\n\treturn rounded.UnixNano() / int64(time.Millisecond)\n}\n"})})}),(0,a.jsx)(c.A,{value:"dotnet",label:".NET",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"static long GetIntervalMarker(int minutesBack = 0)\n{\n  DateTime now = DateTime.UtcNow.AddMinutes(-minutesBack);\n  now = new DateTime(now.Year, now.Month, now.Day, now.Hour, now.Minute, 0, DateTimeKind.Utc);\n  return new DateTimeOffset(now).ToUnixTimeMilliseconds();\n}\n"})})})]}),"\n",(0,a.jsxs)(n.p,{children:["\u30c7\u30d0\u30a4\u30b9\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u6570\u3092\u8ffd\u8de1\u3059\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u30fb\u30ad\u30fc\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u3001\u4e0a\u8a18\u306e\u95a2\u6570\u306e\u5024\u3092\u30e6\u30fc\u30b6\u306e\u30a2\u30ab\u30a6\u30f3\u30c8ID\u306e\u672b\u5c3e\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\u3053\u306e\u65b9\u6cd5\u3067\u30ad\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u3054\u3068\u306b ",(0,a.jsx)(n.em,{children:"\u5c02\u7528\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30fb\u30a2\u30a4\u30c6\u30e0"})," \u304c\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\u9069\u5207\u306a",(0,a.jsx)(n.a,{href:"/cache/learn/how-it-works/expire-data-with-ttl",children:"time to live (TTL)"}),"\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30a2\u30a4\u30c6\u30e0\u306f\u81ea\u52d5\u7684\u306b\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u3001\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5fc5\u8981\u306a\u30b3\u30fc\u30c9\u304c\u7c21\u7d20\u5316\u3055\u308c\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Get the account id through your business logic\nconst accountId = getAccountId(req);\nconst { deviceId } = req.body;\nconst key = `${accountId}-${getIntervalMarker()}`;\n\nawait cacheClient.dictionaryIncrement('video', key, deviceId, 1);\n"})})}),(0,a.jsx)(c.A,{value:"go",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'accountId := getAccountId(req)\ndeviceId := req.DeviceID\n\nkey := fmt.Sprintf("%s-%d", accountId, getIntervalMarker())\n_, err := cacheClient.DictionaryIncrement(ctx, &momento.DictionaryIncrementRequest{\n  CacheName:      momento.String("video"),\n  DictionaryName: key,\n  Field:          deviceId,\n  Amount:         1\n})\nif err != nil {\n  fmt.Println("Error incrementing cache:", err)\n}\n'})})}),(0,a.jsx)(c.A,{value:"dotnet",label:".NET",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'  var accountId = GetAccountId(req);\n  var deviceId = req.Body.DeviceId;\n  var key = $"{accountId}-{getIntervalMarker()}";\n\n  await cacheClient.DictionaryIncrementAsync("video", key, deviceId, 1);\n'})})})]}),"\n",(0,a.jsx)(n.p,{children:"\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u304c\u53d7\u4fe1\u3055\u308c\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9ID\u304c\u8f9e\u66f8\u306b\u5024\u3068\u3057\u3066\u683c\u7d0d\u3055\u308c\u3001\u30ab\u30a6\u30f3\u30c8\u304c\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u308c\u308b\u3002\u8f9e\u66f8\u306b\u306f\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u9577\u306e2\u500d\u306eTTL\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30c7\u30fc\u30bf\u304c\u4e0d\u8981\u306b\u306a\u308b\u3068\u81ea\u52d5\u7684\u306b\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u3055\u3066\u3001\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3055\u308c\u305f\u306e\u3067\u3001\u4f55\u53f0\u306e\u30c7\u30d0\u30a4\u30b9\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u30b9\u30c1\u30fc\u30e0\u3057\u3066\u3044\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30b3\u30fc\u30c9\u306b\u79fb\u308a\u307e\u3057\u3087\u3046\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc",children:"\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc"}),"\n",(0,a.jsxs)(n.p,{children:["\u6700\u5f8c\u306b\u3001\u540c\u6642\u5b9f\u884c\u30c1\u30a7\u30c3\u30ab\u30fc\u304c\u3042\u308b\u3002\u591a\u304f\u306e\u5834\u5408\u3001",(0,a.jsx)(n.a,{href:"/media-storage/entitlements/about",children:"entitlement check"}),"\u306e\u4e00\u90e8\u3068\u3057\u3066\u7d44\u307f\u8fbc\u307e\u308c\u308b\u3053\u306e\u30ed\u30b8\u30c3\u30af\u306f\u3001\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u8f9e\u66f8\u3092\u8aad\u307f\u53d6\u308a\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u8a31\u5bb9\u9650\u5ea6\u3092\u8d85\u3048\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u5224\u65ad\u3057\u307e\u3059\u3002\u540c\u6642\u5b9f\u884c\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u306b\u306f\u3001",(0,a.jsx)(n.em,{children:"\u524d\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb"}),"\u304b\u3089\u8f9e\u66f8\u306e\u9577\u3055\u3092\u53d6\u5f97\u3057\u3001\u30a8\u30f3\u30c8\u30ea\u6570\u3092\u6570\u3048\u307e\u3059\u3002"]}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"node",label:"Node.js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"async function getConcurrentDeviceCount(accountId) {\n  const interval = getIntervalMarker(1);\n  const intervalKey = `${accountId}-${interval}`;\n  let deviceCount = 0;\n  const response = await cacheClient.dictionaryLength('video', intervalKey);\n  if(response.type === CacheDictionaryLengthResponse.Hit){\n    deviceCount = response.value();\n  }\n  return deviceCount;\n}\n"})})}),(0,a.jsx)(c.A,{value:"go",label:"Go",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-go",children:'func getConcurrentDeviceCount(accountId string) int {\n  interval := getIntervalMarker(1)\n\tintervalKey := fmt.Sprintf("%s-%d", accountId, interval)\n\tdeviceCount := 0\n\n\tresp, err := client.DictionaryLength(ctx, &momento.DictionaryLengthRequest{\n\t\tCacheName:      momento.String("video"),\n\t\tDictionaryName: intervalKey,\n\t})\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tswitch r := resp.(type) {\n\tcase *responses.DictionaryLengthHit:\n\t\tdeviceCount = int(r.Length())\n\t}\n\treturn deviceCount\n}\n'})})}),(0,a.jsx)(c.A,{value:"dotnet",label:".NET",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'static async Task<int> GetConcurrentDeviceCount(CacheClient cacheClient, string accountId)\n{\n  long interval = GetIntervalMarker(1);\n  string intervalKey = $"{accountId}-{interval}";\n  int deviceCount = 0;\n\n  CacheDictionaryLengthResponse response = await cacheClient.DictionaryLengthAsync("video", intervalKey);\n  if (response is CacheDictionaryLengthResponse.Hit)\n  {\n    deviceCount = response.Length;\n  }\n\n  return deviceCount;\n}\n'})})})]}),"\n",(0,a.jsxs)(n.p,{children:["\u3053\u306e\u95a2\u6570\u306f\u3001\u524d\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u4f5c\u6210\u3057\u305f ",(0,a.jsx)(n.code,{children:"getIntervalMarker"})," \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u6700\u5f8c\u306e\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u306e\u6642\u9593\u3092\u53d6\u5f97\u3057\u3001Momento Cache \u3092\u547c\u3073\u51fa\u3057\u3066\u8f9e\u66f8\u306e\u30a8\u30f3\u30c8\u30ea\u6570\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u899a\u3048\u3066\u304a\u3044\u3066\u307b\u3057\u3044\u306e\u306f\u3001\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u3092\u5831\u544a\u3057\u305f\u5404\u30c7\u30d0\u30a4\u30b9\u306f\u8f9e\u66f8\u306e\u30a8\u30f3\u30c8\u30ea\u3068\u3057\u3066\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u308b\u306e\u3067\u3001\u9577\u3055\u306f\u76f4\u63a5\u3001\u540c\u6642\u30d7\u30ec\u30fc\u30e4\u30fc\u306e\u6570\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u3053\u306e\u5024\u306f\u547c\u3073\u51fa\u3057\u5143\u306b\u8fd4\u3055\u308c\u3001\u305d\u3053\u304b\u3089\u5148\u306f\u6a19\u6e96\u7684\u306a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306b\u4efb\u3055\u308c\u307e\u3059\u3002"}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsxs)(n.p,{children:["\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u5b8c\u5168\u306a\u5b9f\u4f8b\u3068\u3001\u30e1\u30c7\u30a3\u30a2\u30fb\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306e\u4ed6\u306e\u5b9f\u7528\u7684\u306a\u30d1\u30bf\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\u79c1\u305f\u3061\u306e",(0,a.jsx)(n.a,{href:"https://github.com/momentohq/demo-video-streaming",children:"demo on GitHub"}),"\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\uff01"]})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);
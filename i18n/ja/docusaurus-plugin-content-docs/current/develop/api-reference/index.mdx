---
sidebar_position: 5
title: API リファレンス情報
pagination_prev: null
sidebar_label: API リファレンス
description: Momento Cache の知っておくべき API 呼出しと、それらをどの様に使うかを学びましょう。
---

import { SdkExamples } from "@site/src/components/SdkExamples";
import { SdkExampleSnippets } from "@site/src/components/SdkExampleSnippets";
// This import is necessary even though it looks like it's un-used; The inject-example-code-snippet
// plugin will transform instances of SdkExampleSnippets to SdkExampleSnippetTabs
import { SdkExampleSnippetTabs } from "@site/src/components/SdkExampleSnippetTabs";

# Momento Cache の API リファレンス

## コントロールAPIs

これらの API はキャッシュの管理と制御に使います。

### Create cache

与えられた名前のキャッシュを作成します。

| 名前      | 型   | 説明                      |
| --------- | ------ | -------------------------------- |
| cacheName | String | 作成するキャッシュの名前 |

<SdkExampleSnippets snippetId={'API_CreateCache'} />

### Delete cache

キャッシュを削除します。

| 名前      | 型   | 説明                      |
| --------- | ------ | -------------------------------- |
| cacheName | String | 削除するキャッシュの名前 |

<SdkExampleSnippets snippetId={'API_DeleteCache'} />

### List caches

すべてのキャッシュを一覧表示する。

| 名前      | 型   | 説明                     |
| --------- | ------ | ------------------------------- |
| nextToken | String | キャッシュ一覧のページネーショントークン |

<SdkExampleSnippets snippetId={'API_ListCaches'} />

### Flush cache

キャッシュ内の全てのデータをフラッシュします。

| 名前      | 型   | 説明                      |
| --------- | ------ | -------------------------------- |
| cacheName | String | フラッシュするキャッシュの名前 |

<SdkExampleSnippets snippetId={'API_FlushCache'} />

:::tip

これは、[Delete Cache](#delete-cache) してから [Create Cache](#create-cache) することで似た様なことができますが、 FlushCache API は設定を保持したままキャッシュ内のデータだけを削除してくれます。

:::

## データAPIs

これらの API はキャッシュ内のデータを直接やり取りするために使います。

### Set

キャッシュ内に、与えられた生存期間 (TTL) を持つ値を書き込みます。もしこのキーに既に値が存在する場合、新しい値に置き換えられます。

| 名前       | 型   | 説明                                   |
| ---------- | ------ | --------------------------------------------- |
| cacheName  | String | キャッシュの名前                            |
| key        | []Byte | 値が追加されるキー |
| value      | []Byte | 保存される値                       |
| ttlSeconds | int    | キャッシュ内での生存期間           |

<SdkExampleSnippets snippetId={'API_Set'} />

### Get

与えられたキーのキャッシュされた値を読み出します。

| 名前      | 型   | 説明                                   |
| --------- | ------ | --------------------------------------------- |
| cacheName | String | キャッシュの名前                            |
| key       | []Byte | 値が取得されるキー |

<SdkExampleSnippets snippetId={'API_Get'} />

### Delete

与えられたキーにキャッシュされた値を削除します。

| 名前      | 型   | 説明                                     |
| --------- | ------ | ----------------------------------------------- |
| cacheName | String | キャッシュの名前                              |
| key       | []Byte | 値が削除されるキー |

<SdkExampleSnippets snippetId={'API_Delete'} />

### Increment

フィールドの値に加減算します。既存の値は基数 10 の整数を表現する UTF-8 の文字列になっている必要があります。もしフィールドが存在しなければ、このメソッドは加減算する量をフィールドの値に書き込みます。

| 名前      | 型   | 説明                                     |
| --------- | ------ | ----------------------------------------------- |
| cacheName | String | キャッシュの名前                              |
| field       | String | 値が加減算されるキー |
| amount       | Integer | 値に加減算される量。正の値か、負の値か、もしくはゼロ。デフォルトは 1 |

:::note

加減算された結果の値は -9223372036854775808 と 9223372036854775807 の間、つまり符号付64ビット整数である必要があります。もしそうでない場合、エラーレスポンスが返ってきます。

:::

### Ping
サーバーに ping を送ります。この API は疎通確認に使うことができて、クライアントが正しくサーバーに接続できることを確認できます。

<details>
    <summary>レスポンスオブジェクト</summary>

    * Success
    * Error

詳細な情報は、[レスポンスオブジェクト](./response-objects.md) をご覧下さい。

</details>

### KeyExists

与えられたキーがキャッシュに存在するかを確認します。

| 名前            | 型            | 説明                                   |
| --------------- | --------------- | --------------------------------------------- |
| cacheName       | String          | キャッシュの名前                            |
| key        | String \| byte          | キャッシュ内の存在確認をするキー              |

<details>
    <summary>レスポンスオブジェクト</summary>

    * Success
    - `exists()`: bool
    * Error

詳細な情報は、[レスポンスオブジェクト](./response-objects.md) をご覧下さい。

</details>

### KeysExist

与えられた複数のキーがキャッシュに存在するかを確認します。

| 名前            | 型            | 説明                                   |
| --------------- | --------------- | --------------------------------------------- |
| cacheName       | String          | キャッシュの名前                            |
| keys        | String[] \| byte[]          | キャッシュ内の存在確認をする複数のキー              |

<details>
    <summary>レスポンスオブジェクト</summary>

    * Success
    - `exists()`: bool[]
    * Error

詳細な情報は、[レスポンスオブジェクト](./response-objects.md) をご覧下さい。

</details>

### SetIfNotExists

与えられた値を与えられたキーでキャッシュに作成します。

| 名前       | 型   | 説明                                   |
| ---------- | ------ | --------------------------------------------- |
| cacheName  | String | キャッシュの名前                            |
| key        | String \| bytes | 書き込むキー |
| value      | String \| bytes | 保存する値                       |
| ttlSeconds | Duration    | キャッシュ内での生存期間           |

<details>
    <summary>レスポンスオブジェクト</summary>

    * Stored
    * NotStored
    * Error

詳細な情報は、[レスポンスオブジェクト](./response-objects.md) をご覧下さい。

</details>

## 生存期間(Time to Live)APIs

これらの API は全てのキャッシュの型に適応します。

### UpdateTtl

与えられた秒数で、キャッシュされている項目の TTL を上書きします。

| 名前      | 型   | 説明                                     |
| --------- | ------ | ----------------------------------------------- |
| cacheName | String | キャッシュの名前                              |
| key       | String \| bytes | 値のTTL が更新されるキー |
| ttl       | Duration | キャッシュ内の生存期間に設定したい秒数 |

### IncreaseTtl

キーの TTL 秒数を、TTL が増加する場合にのみ、与えられた値で更新します。

例
- もし TTL が 5 秒で、6 秒に増加しようとしたら、新しい TTL は 6 秒になります。
- もし TTL が 5 秒で、3 秒に増加しようとしたら、TTL は増加されません。

| 名前      | 型   | 説明                                     |
| --------- | ------ | ----------------------------------------------- |
| cacheName | String | キャッシュの名前                              |
| key       | String \| bytes | 値のTTL が増加されるキー |
| ttl       | Duration | キャッシュ内の生存期間に設定したい秒数 |

### DecreaseTtl

キーの TTL 秒数を、TTL が減少する場合にのみ、与えられた値で更新します。

例
- もし TTL が 5 秒で、3 秒に減少しようとしたら、新しい TTL は 3 秒になります。
- もし TTL が 5 秒で、6 秒に減少しようとしたら、TTL は減少されません。

| 名前      | 型   | 説明                                     |
| --------- | ------ | ----------------------------------------------- |
| cacheName | String | キャッシュの名前                              |
| key       | String \| bytes | 値のTTL が減少されるキー |
| ttl       | Duration | キャッシュ内の生存期間に設定したい秒数 |

### コレクションデータ型(CDTs)

コレクション型は、ユースケースに依っては異なる構造の型を含む場合もあります。サポートしているデータ型は以下の通りです:

* [辞書型](./dictionary-collections.md)は、順序のない field:value のペアを保存するのに使用されます。
* [リスト型](./list-collections.md)は、順序のある要素の集合で、各要素が挿入された順番にソートされています。
* [セット型](./set-collections.md)は、順序のない、ユニークな文字列形式の要素の集合です。
* [ソート済セット型](./sorted-set-collections.md)は、ユニークな要素の順序がある集合です。各要素は value:score のペアで表現されます。

より詳しい利用方法の情報は、[コレクションデータ型](./../datatypes.md)をご覧下さい。


## 現時点での SDK による API のサポート状況

| 機能           | .NET               | Java               | Node.js            | Python             | Go                 | PHP                | Ruby               | Rust               |
|-------------------|--------------------|--------------------|--------------------|--------------------|--------------------|--------------------|--------------------|--------------------|
| Control APIs      | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: |
| Get/Set           | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: |
| Increment         | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :x:                | :x:                | :x:                |
| 辞書型 CDTs   | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :x:                |
| セット型 CDTs          | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :x:                | :x:                |
| リスト型 CDTs         | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :x:                | :x:                |
| ソート済セット型 CDTs   | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :white_check_mark: | :x:                | :x:                | :x:                |
| Flush Cache       | :white_check_mark: | :white_check_mark: | :white_check_mark: | :x:                | :x:                | :x:                | :x:                | :white_check_mark: |
| Topics (pub/sub)  | :x:                | :x:                | :white_check_mark: | :x:                | :white_check_mark: | :x:                | :x:                | :x:                |

---
sidebar_position: 1
title: How it works | Momento Serverless Cache
description: Explore what makes Momento Serverless Cache work and how best to utilize it with your apps.
sidebar_label: どのように動作するか
---

# どのように動作するか - Momento Cache

このページでは、アプリケーションでMomento Cacheを使用する際の概念について説明します。MomentoはGolang、JavaScript、Python、Java、.NETのSDKをサポートしていますが、このページで説明するコンセプトはすべての言語に適用できます。

Momento Cacheを作るにあたって、私たちはシンプルさとスピードの2つに重点を置いてきました。すべての決定は、この 2 つの目標のためにあります。以下のMomento Cacheのコンセプトの説明では、これらのコンセプトがユーザーにとってどのように簡単または高速になるのかも説明します。

このページでは、Momento Cacheを使用するための2つの主要な側面について説明します：

- [SimpleCacheオブジェクトとMomento SDK](#the-simplecache-object);

- [Momento APIとの対話](#interacting-with-the-momento-api);

## CacheClient オブジェクトと Momento Cache での開発

すべての Momento SDK では、CacheClient オブジェクトを使用して Momento Cache サービスと対話します。CacheClient オブジェクトは、クレデンシャル管理と Momento API との効率的な対話を提供します。

CacheClient を使用する方法の詳細については、[Momento SDK] (./../develop) のページを参照してください。

CacheClient インスタンスは、Momento Cache のコントロールプレーン API とデータプレーン API の両方とやり取りできます。それぞれについて見ていきましょう。

### コントロールプレーン：シンプルで効率的なキャッシュ管理

Momento Cache control plane API は、キャッシュを全体的に管理するために使用する API です。コントロールプレーン API を使って、新しいキャッシュを作成したり、既存のキャッシュを一覧表示したり、不要なキャッシュを削除したりできます。

コントロールプレーンと聞くと、「時間がかかる、管理業務」と思うかもしれません。しかし、ここではそうではないのです。**Momentoは、アカウント内のキャッシュを迅速かつ効率的に管理するように設計されています。** キャッシュを作成するためにコマンドを発行し、バックグラウンドでキャッシュが作成されるのを待つことはありません。Momentoでは、キャッシュは同期的に1秒以内に作成されます。キャッシュの作成要求が返ってくるまでに、キャッシュの準備は完了します。

Momento Cacheの各キャッシュは他のキャッシュから分離されており、アカウントに持てるキャッシュ数に技術的な制限はありませんが、[サービス制限](./../manage/limits)という形でガードレールが設けられています。つまり、アプリケーションの環境ごと、あるいは継続的インテグレーション/継続的デリバリー（CI/CD）システムのデプロイ済みブランチごとに専用のキャッシュを持つことができます。

### データプレーン: パフォーマンスの高いキャッシュ・インタラクション

Momento Cacheの制御プレーンは非常に便利ですが、データプレーン操作はアクションの場所です。データプレーン API とは、キャッシュ内のデータと実際にやりとりする操作のことです。ほとんどのデータプレーン操作にかかる時間は、 クライアントから見て 1-2 ミリ秒以下です。

データプレーンには、キャッシュエントリーの書き込みと取得を可能にする標準的な「Set」と「Get」のキャッシュ機能が含まれています。また、multi-getコマンドとmulti-setコマンドを使用して、1回のリクエストで複数のキャッシュ・エントリを処理することもできます。

## Momento Cache API との対話

SimpleCacheオブジェクトはMomento Cache APIとやりとりするための主な方法です。その内部で何が起こっているのか、少し説明しましょう。認証の仕組み、通信フォーマット、Momento API のネットワーク設定について説明します。

### 認証トークン

SimpleCache オブジェクトは Momento Cache サービスと通信する際に認証トークンを使用します。このトークンは [JSON Web Token](https://en.wikipedia.org/wiki/JSON_Web_Token) (あるいは "JWT") で、署名されたアカウント情報が含まれています。また、キャッシュインスタンスのホスト名などの情報も含まれており、 SimpleCache オブジェクトが Momento サービスに対してより効率的なリクエストを行うための助けになります。

Momentoサービスにサインアップすると、Momento認証トークンが発行されます。Momento認証トークンを取得し、Momentoサービスを使い始めるには、こちらの[クイックスタート](./../getting-started)に従ってください。

### gRPC

Momento はクライアントサーバモデルを使った[リモートキャッシュ](./../introduction/common-caching-patterns#where-to-cache----local-vs-remote-caching)です。そのため、SimpleCache クライアントはリモートの Momento キャッシュと通信する必要があります。この通信を容易にするために、Momento は HTTP 上の JSON API から独自の RPC プロトコルまで、様々な通信方法を使用することができます。

SimpleCacheクライアントオブジェクトはMomentoサービスと通信するために[gRPC](https://grpc.io/)を使用します。gRPCはGoogleで開発された、高速で効率的な通信を行うための一般的なオープンソースのリモートプロシージャコール(RPC)フレームワークです。gRPC を使用する場合、公開する RPC と使用するデータ構造を .proto ファイルで定義します。この.protoファイルを使用して、サービスのクライアントとサーバーの実装を構築します。

MomentoユーザーとしてgRPCを使用するメリットは主に2つあります。

まず、gRPC は_速い_です。他のサービスと対話するために JSON ベースの REST API を使用することに慣れているかもしれません。この方法は柔軟ですが、メッセージがプレーンテキスト形式であるため、メッセージ サイズが大きくなり、パフォーマンスが低下します。逆に、gRPC はデフォルトでプロトコル バッファーを使用して、クライアントとサーバーの間でメッセージを交換します。プロトコル バッファーはデータをより効率的なバイナリ形式にシリアル化し、転送の高速化に加え、データのシリアル化と逆シリアル化も高速化します。 Momento のようなキャッシュを使用している場合、この追加の速度は非常に重要です。

2 番目に、gRPC には言語間のサポートがあります。 .proto ファイルを使用すると、サポートされている多数の言語でクライアントを迅速に生成できます。これは Momento ユーザーとして直接役立つわけではありませんが、選択した言語で新機能をすぐに受け取ることができるため、間接的にメリットが得られます。 Momento チームは、言語をまたいでベース クライアントを生成できるため、言語ごとに SDK を保守する負担が軽減されます。各言語に対して生成されたコードの上に、一貫した言語固有のインターフェイスを作成しますが、Momento サービスと対話するベースラインの作業ははるかに少なくなります。

gRPC は、Momento SDK が存在するすべての言語でサポートされています。これらの言語のほとんどでは、Momento が gRPC を使用していることを知る必要はありません。すべての依存関係と gRPC 通信は Momento SDK によって処理されます。 AWS Lambda で Momento Python SDK を使用する場合の特別な懸念事項については、[AWS Lambda での Momento Cache の使用に関するガイド](./../develop/guides/caching-with-aws-lambda#python)を参照してください。

### ネットワーク

上で述べたように、Momento キャッシュはアプリケーションからのリモート サービスであるため、アプリケーションを Momento Cache サービスに接続するためのネットワーク インフラストラクチャについて考える必要があります。私たちの基本原則に従って、Momento はキャッシュと対話するための 2 つのネットワーク メカニズム、デフォルト構成と高度な構成を提供します。

#### デフォルトネットワーク

デフォルトでは、SimpleCache クライアントは、Momento Cache サービスのパブリックにアクセス可能なエンドポイントに接続します。デフォルトのネットワーク設定には、主に 2 つの利点があります。

まず、シンプルです。 [Momento を使い始めて](./../getting-started)、ラップトップから直接わずか 5 分でキャッシュの操作を開始できます。アプリケーションのキャッシュを活用するために、複雑なネットワーク構成を行う必要はありません。

2 番目に、サーバーレス アプリケーションとうまく連携します。多くのサーバーレス アプリケーションは、アクセスを制御するためにプライベート VPC を必要とする接続モデルではなく、HTTPS を使用して利用可能なサービスの使用を優先します。これの一部は、VPC 内で Lambda 関数を使用する際の初期の複雑さとレイテンシーによるものですが、一部は、複雑なネットワーク構成を回避することによる複雑さの軽減によるものです。

これらの利点に魅力を感じる場合は、デフォルトのネットワーク設定が最適です。

#### 高度なネットワーク設定

デフォルトのネットワーク設定に加えて、Momento は、アプリケーションに最適なものに応じて、VPC と Momento VPC 間の最適なパスを可能にする高度なネットワーク構成を提供します。現在、AWS では VPC エンドポイントと VPC ピアリングの両方をサポートできます。

これらは、コンプライアンスのためにプライベート アドレス経由でトラフィックを維持する必要がある場合、または極端な帯域幅または遅延要件がある場合に、ワークロードに適したオプションです。 Momento キャッシュで VPC エンドポイントまたは VPC ピアリングを使用することに興味がある場合は、詳細を確認してアカウントの試用を承認してもらうために[お問い合わせ](mailto:support@momentohq.com)ください。

## まとめ

このページでは、Momento SDK と API を使用する基本概念を学びました。 Momento Cache の使用を開始したい場合は、[スタートガイド](./../getting-started).をご覧ください。

キャッシュ戦略とキャッシュについての考え方について詳しく知りたい場合は、[キャッシュ戦略とパターン](./../introduction/common-caching-patterns)に関するリソースを確認してください。

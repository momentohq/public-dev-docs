(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[5452],{86702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var o=n(74848),s=n(28453),i=n(68254),r=n(37206);const a={title:"Webhooks",description:"Learn about Webhooks, an event-driven mechanism to listen to Momento Topics",image:"https://assets-global.website-files.com/628fadb065a50abf13a11485/659580dc80a9699d3d1ae72a_webhooks-launch-blog-header.png",hide_title:!0,sidebar_position:1,sidebar_label:"Overview",pagination_prev:null,keywords:["topics","webhooks","eda","momento","event-driven architecture"]},l="Use webhooks as subscribers to a topic",c={id:"topics/webhooks/overview",title:"Webhooks",description:"Learn about Webhooks, an event-driven mechanism to listen to Momento Topics",source:"@site/docs/topics/webhooks/overview.mdx",sourceDirName:"topics/webhooks",slug:"/topics/webhooks/overview",permalink:"/topics/webhooks/overview",draft:!1,unlisted:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/topics/webhooks/overview.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Webhooks",description:"Learn about Webhooks, an event-driven mechanism to listen to Momento Topics",image:"https://assets-global.website-files.com/628fadb065a50abf13a11485/659580dc80a9699d3d1ae72a_webhooks-launch-blog-header.png",hide_title:!0,sidebar_position:1,sidebar_label:"Overview",pagination_prev:null,keywords:["topics","webhooks","eda","momento","event-driven architecture"]},sidebar:"topicsSidebar",next:{title:"Getting Started",permalink:"/topics/webhooks/creating-a-webhook"}},h={},d=[{value:"Why use webhooks?",id:"why-use-webhooks",level:2},{value:"The webhook event",id:"the-webhook-event",level:2},{value:"Example event",id:"example-event",level:3},{value:"Event structure",id:"event-structure",level:3},{value:"cache",id:"cache",level:4},{value:"topic",id:"topic",level:4},{value:"event_timestamp",id:"event_timestamp",level:4},{value:"publish_timestamp",id:"publish_timestamp",level:4},{value:"topic_sequence_number",id:"topic_sequence_number",level:4},{value:"token_id",id:"token_id",level:4},{value:"text",id:"text",level:4},{value:"Headers",id:"headers",level:3},{value:"Momento-Signature",id:"momento-signature",level:4},{value:"User-Agent",id:"user-agent",level:4},{value:"Event delivery",id:"event-delivery",level:2},{value:"API calls for Webhooks",id:"api-calls-for-webhooks",level:2},{value:"See More",id:"see-more",level:2}];function u(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"use-webhooks-as-subscribers-to-a-topic",children:"Use webhooks as subscribers to a topic"})}),"\n",(0,o.jsx)(t.p,{children:"Trigger endpoints in your application when a message is published to a topic. Every time an event is published, Momento will send a POST request to all configured webhooks and any other subscribers."}),"\n",(0,o.jsx)(t.h2,{id:"why-use-webhooks",children:"Why use webhooks?"}),"\n",(0,o.jsxs)(t.p,{children:["When using the Momento SDK to subscribe to a topic, a persistent connection is setup between your application code and the Momento service. This makes a standard subscription ",(0,o.jsx)(t.em,{children:"stateful"}),", meaning the subscriber must always be on and available in order to publish or receive messages. Subscribers like browsers and containers work incredibly well in this environment, but it leaves stateless compute like Lambda functions or Google Cloud Run services out of luck."]}),"\n",(0,o.jsx)(t.p,{children:"Webhooks allow you to subscribe any type of compute to receive events. Since a webhook does not maintain an active connection, you can put a serverless function behind an endpoint and be on your merry way!"}),"\n",(0,o.jsx)(t.p,{children:"Using a webhook as a subscriber is perfect for asynchronous events like persisting messages to durable storage like a database, replicating data across regions, and even adding intermediary services like translation and moderation to chats."}),"\n",(0,o.jsx)(t.p,{children:"A topic can have both stateful subscriptions and webhooks. This allows you to connect anything you want, from anywhere, at any time!"}),"\n",(0,o.jsx)(t.h2,{id:"the-webhook-event",children:"The webhook event"}),"\n",(0,o.jsx)(t.p,{children:"When an event is published to a topic, Momento will generate a request that includes metadata about the event in addition to the event payload. For enhanced security, this request includes additional headers."}),"\n",(0,o.jsx)(t.h3,{id:"example-event",children:"Example event"}),"\n",(0,o.jsx)(t.p,{children:"Below is a sample payload representing a message sent in a chat room. Note that this is a template and specific values will differ in your implementation."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n  "cache": "chat",\n  "topic": "room-281",\n  "event_timestamp": 1704296470564,\n  "publish_timestamp": 1704296470565,\n  "topic_sequence_number": 1,\n  "token_id": "mo-the-squirrel",\n  "text": "Here I am!!"\n}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"event-structure",children:"Event structure"}),"\n",(0,o.jsx)(t.p,{children:"The properties of the webhook event are listed below along with the function they provide."}),"\n",(0,o.jsx)(t.h4,{id:"cache",children:"cache"}),"\n",(0,o.jsx)(t.p,{children:"The name of the cache the topic belongs to. This is used for namespacing purposes in Momento Topics. All topics must be published to a valid cache in your account."}),"\n",(0,o.jsx)(t.h4,{id:"topic",children:"topic"}),"\n",(0,o.jsx)(t.p,{children:"The name of the topic that triggered the webhook. Remember, topic names are dynamic and are not resources in your Momento account. You can publish a message to any string, which adds an incredible amount of flexibility to messages, like using a variable as the topic name of your workflow."}),"\n",(0,o.jsx)(t.h4,{id:"event_timestamp",children:"event_timestamp"}),"\n",(0,o.jsx)(t.p,{children:"Timestamp in milliseconds since the Unix Epoch when the event was published."}),"\n",(0,o.jsx)(t.h4,{id:"publish_timestamp",children:"publish_timestamp"}),"\n",(0,o.jsxs)(t.p,{children:["Timestamp in milliseconds since the Unix Epoch when the webhook was published to. You can subtract the ",(0,o.jsx)(t.code,{children:"event_timestamp"})," value from this value to determine the server side latency for message delivery. In our example above, the delivery latency was 1 millisecond."]}),"\n",(0,o.jsx)(t.h4,{id:"topic_sequence_number",children:"topic_sequence_number"}),"\n",(0,o.jsxs)(t.p,{children:["Message number for the topic. As messages are published, the ",(0,o.jsx)(t.code,{children:"topic_sequence_number"})," increments. This can be used for determining order. After a period of inactivity, the sequence numbers will reset back to 0. Momento does not guarantee order for event delivery."]}),"\n",(0,o.jsx)(t.h4,{id:"token_id",children:"token_id"}),"\n",(0,o.jsxs)(t.p,{children:["Unique identifier from a ",(0,o.jsx)(t.a,{href:"/topics/develop/authentication/tokens",children:"token"}),". When a token is created via the Momento ",(0,o.jsx)(t.code,{children:"AuthClient"}),", you can provide an identifier to be passed along all events published to Momento Topics. ",(0,o.jsx)(t.a,{href:"https://www.gomomento.com/blog/momento-topics-just-got-more-secure-introducing-embedded-token-identifiers",children:"Learn more"}),"."]}),"\n",(0,o.jsx)(t.h4,{id:"text",children:"text"}),"\n",(0,o.jsx)(t.p,{children:"The contents of the event published to the topic. The contents of this property are provided by the publisher and are not generated by Momento."}),"\n",(0,o.jsx)(t.h3,{id:"headers",children:"Headers"}),"\n",(0,o.jsx)(t.p,{children:"Each request includes two specific headers provided by Momento, enabling integrators to verify the sender's authenticity."}),"\n",(0,o.jsx)(t.h4,{id:"momento-signature",children:"Momento-Signature"}),"\n",(0,o.jsxs)(t.p,{children:["A signature of the request payload, signed with the secret you specified when setting up your webhook, used to verify the integrity and origin of the request. Check out our ",(0,o.jsx)(t.a,{href:"/topics/webhooks/security",children:"webhook security page"})," on validating inbound requests."]}),"\n",(0,o.jsx)(t.h4,{id:"user-agent",children:"User-Agent"}),"\n",(0,o.jsxs)(t.p,{children:["A static header sent by Momento to identify the source of the request, with the format ",(0,o.jsx)(t.code,{children:"Momento/1.0 (Webhooks; +https://docs.momentohq.com/topics/webhooks)"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"event-delivery",children:"Event delivery"}),"\n",(0,o.jsxs)(t.p,{children:["Momento will attempt to deliver an event to your webhook ",(0,o.jsx)(t.strong,{children:"one time"}),". If an event is not received by your endpoint, the publisher is required to send the message again."]}),"\n",(0,o.jsx)(t.p,{children:"A failed delivery, which will not be redriven automatically, could be due to one of the following reasons:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"A non-2XX response (e.g., 400, 403, 500, etc.)."}),"\n",(0,o.jsx)(t.li,{children:"No response after 5 seconds."}),"\n",(0,o.jsx)(t.li,{children:"A connection error to your endpoint."}),"\n",(0,o.jsxs)(t.li,{children:["Rate limit exceeded (",(0,o.jsx)(t.a,{href:"/topics/limits",children:"see default limits"}),")."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"api-calls-for-webhooks",children:"API calls for Webhooks"}),"\n",(0,o.jsxs)(t.p,{children:["Interested in using our SDKs to programmatically setup webhooks? See our ",(0,o.jsx)(t.a,{href:"/topics/api-reference/webhooks",children:"API reference page for webhooks"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"see-more",children:"See More"}),"\n","\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(r.V,{title:"Use webhooks with API Gateway + Lambda",link:"https://www.gomomento.com/blog/how-to-use-webhooks-and-momento-topics-to-build-a-multi-language-chat-app",description:"Learn how to integrate Momento webhooks with Amazon API Gateway and Lambda functions"}),(0,o.jsx)(r.V,{title:"Multi-language chat app",link:"https://github.com/momentohq/moderated-chat/",description:"Explore the source code of our live-translation chat app using webhooks."})]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},44788:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__monkey_patch__=function(e,t){"types"===e?Object.assign(u,t):f[e]=t},t.attrs=a,t.legacyMerge=t.keyframes=t.include=t.firstThatWorks=t.defineVars=t.default=t.createTheme=t.create=void 0,t.props=r,t.types=void 0;var o=n(73176);const s=e=>new Error(`'stylex.${e}' should never be called at runtime. It should be compiled away by '@stylexjs/babel-plugin'`),i=e=>s(`types.${e}`);function r(){const e=this;for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(f.props)return f.props.call(e,n);const[i,r]=(0,o.styleq)(n),a={};return null!=i&&""!==i&&(a.className=i),null!=r&&Object.keys(r).length>0&&(a.style=r),a}function a(){const{className:e,style:t}=r(...arguments),n={};return null!=e&&""!==e&&(n.class=e),null!=t&&Object.keys(t).length>0&&(n.style=Object.keys(t).map((e=>`${e}:${t[e]};`)).join("")),n}const l=t.create=function(e){if(null!=f.create){return(0,f.create)(e)}throw s("create")},c=t.defineVars=function(e){if(f.defineVars)return f.defineVars(e);throw s("defineVars")},h=t.createTheme=(e,t)=>{if(f.createTheme)return f.createTheme(e,t);throw s("createTheme")},d=t.include=e=>{if(f.include)return f.include(e);throw s("include")},u=t.types={angle:e=>{throw i("angle")},color:e=>{throw i("color")},url:e=>{throw i("url")},image:e=>{throw i("image")},integer:e=>{throw i("integer")},lengthPercentage:e=>{throw i("lengthPercentage")},length:e=>{throw i("length")},percentage:e=>{throw i("percentage")},number:e=>{throw i("number")},resolution:e=>{throw i("resolution")},time:e=>{throw i("time")},transformFunction:e=>{throw i("transformFunction")},transformList:e=>{throw i("transformList")}},p=e=>{if(f.keyframes)return f.keyframes(e);throw s("keyframes")};t.keyframes=p;const m=function(){if(f.firstThatWorks)return f.firstThatWorks(...arguments);throw s("firstThatWorks")};function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[s]=(0,o.styleq)(t);return s}t.firstThatWorks=m,b.props=r,b.attrs=a,b.create=l,b.defineVars=c,b.createTheme=h,b.include=d,b.keyframes=p,b.firstThatWorks=m,b.types=u;const f={};t.legacyMerge=b;t.default=b},68254:(e,t,n)=>{"use strict";var o=n(6305).default;t.p=void 0;o(n(44788));var s=n(74848);t.p=e=>{let{variant:t,children:n}=e;return(0,s.jsx)("div",{...{0:{className:"xrvj5dj xoybqp3 x1p9eum2"},1:{className:"xrvj5dj xoybqp3 x1wlfl8j"}}[!("dense"!==t)|0],children:n})}},37206:(e,t,n)=>{"use strict";var o=n(24994).default,s=n(6305).default;t.V=void 0;s(n(44788));var i=o(n(28774)),r=n(74848);t.V=e=>{let{title:t,description:n,link:o,icon:s,alignText:a="start",alignItems:l="start"}=e;return(0,r.jsxs)(i.default,{to:o,target:"_blank",...{0:{className:"x78zum5 xh8yej3 x1in32aq x1tamke2 x1q0g3np x7a106z xou54vl xqlwffn x12oqio5 x15ny4rc xokoxfd x1hl2dhg x1heor9g"},1:{className:"x78zum5 xh8yej3 x1in32aq x1tamke2 x1q0g3np xou54vl xqlwffn x12oqio5 x15ny4rc xokoxfd x1hl2dhg x1heor9g x6s0dn4"}}[!("center"!==l)|0],children:[s&&(0,r.jsx)("img",{src:s,height:"32px",width:"32px"}),(0,r.jsxs)("div",{...{0:{className:"x1iyjqo2 x1yc453h"},1:{className:"x1iyjqo2 x2b8uid"}}[!("center"!==a)|0],children:[(0,r.jsx)("h3",{className:"x1q12cbh",children:t}),(0,r.jsx)("p",{className:"xif65rj xo1l8bm x1du4iog",children:n})]})]})}},73176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styleq=void 0;var n=new WeakMap;function o(e){var t,o,s;return null!=e&&(t=!0===e.disableCache,o=!0===e.disableMix,s=e.transform),function(){for(var e=[],i="",r=null,a=t?null:n,l=new Array(arguments.length),c=0;c<arguments.length;c++)l[c]=arguments[c];for(;l.length>0;){var h=l.pop();if(null!=h&&!1!==h)if(Array.isArray(h))for(var d=0;d<h.length;d++)l.push(h[d]);else{var u=null!=s?s(h):h;if(u.$$css){var p="";if(null!=a&&a.has(u)){var m=a.get(u);null!=m&&(p=m[0],e.push.apply(e,m[1]),a=m[2])}else{var b=[];for(var f in u){var v=u[f];"$$css"!==f&&("string"==typeof v||null===v?e.includes(f)||(e.push(f),null!=a&&b.push(f),"string"==typeof v&&(p+=p?" "+v:v)):console.error("styleq: ".concat(f," typeof ").concat(String(v),' is not "string" or "null".')))}if(null!=a){var x=new WeakMap;a.set(u,[p,b,x]),a=x}}p&&(i=i?p+" "+i:p)}else if(o)null==r&&(r={}),r=Object.assign({},u,r);else{var g=null;for(var y in u){var w=u[y];void 0!==w&&(e.includes(y)||(null!=w&&(null==r&&(r={}),null==g&&(g={}),g[y]=w),e.push(y),a=null))}null!=g&&(r=Object.assign(g,r))}}}return[i,r]}}var s=o();t.styleq=s,s.factory=o},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6305:(e,t,n)=>{var o=n(73738).default;function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},73738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},28453:(e,t,n)=>{"use strict";n.d(t,{R:()=>r,x:()=>a});var o=n(96540);const s={},i=o.createContext(s);function r(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);
(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[9259],{80108:(e,s,t)=>{"use strict";t.r(s),t.d(s,{assets:()=>h,contentTitle:()=>p,default:()=>f,frontMatter:()=>l,metadata:()=>d,toc:()=>u});var r=t(74848),i=t(28453),n=t(24874);const o=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","properties":{"permissions":{"type":"array","description":"A set of cache and/or topic permissions used to scope the token.","items":{"anyOf":[{"$ref":"Cache permission","link":"/api/authentication/permissions#cache-permission"},{"$ref":"Topic permission","link":"/api/authentication/permissions#topic-permission"}]}}},"required":["permissions"],"examples":[{"permissions":[{"role":"readonly","cache":"data","item":{"key":"foo"}},{"role":"subscribeonly","cache":"data","topic":"bar"}]}]}'),a=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","properties":{"role":{"type":"string","enum":["readwrite","writeonly","readonly"],"description":"The system-defined permission set for cache operations","example":"readonly"},"cache":{"type":"string","description":"The namespace to scope permissions to","example":"myCache"},"item":{"type":"object","description":"Configuration to limit cache operations to specific keys.","properties":{"keyPrefix":{"type":"string","description":"The prefix of the key name(s) to scope permissions to. Mutually exclusive with the \'key\' property.","example":"id-45-"},"key":{"type":"string","description":"The exact key name to scope permissions to. Mutually exclusive withe the \'keyPrefix\' property."}}}},"required":["role","cache"]}'),c=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","properties":{"role":{"type":"string","enum":["subscribeonly","publishonly","publishsubscribe"],"description":"The system-defined permission set for topic operations","example":"subscribeonly"},"cache":{"type":"string","description":"The namespace to scope permissions to","example":"myCache"},"topic":{"type":"string","description":"The name of the specific topic to scope permissions to.","example":"test-topic"}},"required":["role","cache","topic"]}'),l={sidebar_position:4,title:"Permissions",sidebar_label:"Permissions",id:"permissions",description:"Learn about the permissions available when creating your API keys and session tokens to control access to Momento resources.",pagination_next:null,hide_table_of_contents:!0},p="Permissions and access control",d={id:"api/authentication/permissions",title:"Permissions",description:"Learn about the permissions available when creating your API keys and session tokens to control access to Momento resources.",source:"@site/docs/api/authentication/permissions.mdx",sourceDirName:"api/authentication",slug:"/api/authentication/permissions",permalink:"/api/authentication/permissions",draft:!1,unlisted:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/api/authentication/permissions.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"Permissions",sidebar_label:"Permissions",id:"permissions",description:"Learn about the permissions available when creating your API keys and session tokens to control access to Momento resources.",pagination_next:null,hide_table_of_contents:!0},sidebar:"apiSidebar",previous:{title:"Tokens",permalink:"/api/authentication/tokens"}},h={},u=[{value:"Scope",id:"scope",level:2},{value:"Cache permission",id:"cache-permission",level:2},{value:"Topic permission",id:"topic-permission",level:2}];function m(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"permissions-and-access-control",children:"Permissions and access control"})}),"\n",(0,r.jsxs)(s.p,{children:["When creating a session token or API key, you have the ability to limit permissions to specific namespaces, cache keys, cache key prefixes, and topics. This is made possible through the use of ",(0,r.jsx)(s.em,{children:"permissions"}),". When creating a token, you define a set of permissions in a Scope object. Upon creation, the token will only be able to access the cache keys and topics indicated in the permission scope, along with performing specific operations (read, write, publish, subscribe, etc...). If a user attempts to perform an action outside the bounds of the permission scope, they will receive a ",(0,r.jsx)(s.code,{children:"403 Unauthorized"})," status code."]}),"\n",(0,r.jsx)(s.h2,{id:"scope",children:"Scope"}),"\n",(0,r.jsx)(s.p,{children:"API keys and tokens can be scoped to specific sets of permissions to limit access to resources. The scope object contains both cache permissions and topic permissions."}),"\n","\n",(0,r.jsx)(n.A,{title:"The Scope object",schema:o}),"\n",(0,r.jsx)(s.h2,{id:"cache-permission",children:"Cache permission"}),"\n",(0,r.jsx)(s.p,{children:"You can create permissions for individual cache keys, cache key prefixes, or for an entire cache. When creating a cache permission, users select one of three system-defined roles:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"readwrite"})," - Provides full access to cache data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"writeonly"})," - Provides access to only write operations (",(0,r.jsx)(s.code,{children:"set"}),", ",(0,r.jsx)(s.code,{children:"sortedSetIncrementScore"}),", ",(0,r.jsx)(s.code,{children:"listPopFront"}),", etc...)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"readonly"})," - Provides access to only read operations (",(0,r.jsx)(s.code,{children:"get"}),", ",(0,r.jsx)(s.code,{children:"dictionaryFetch"}),", ",(0,r.jsx)(s.code,{children:"setFetch"}),", etc...)"]}),"\n"]}),"\n","\n",(0,r.jsx)(n.A,{title:"The Cache permission object",schema:a}),"\n",(0,r.jsx)(s.h2,{id:"topic-permission",children:"Topic permission"}),"\n",(0,r.jsxs)(s.p,{children:["You can create permissions for individual or all topics in a given namespace. ",(0,r.jsx)(s.em,{children:"Topic prefixes are not supported"}),". When creating a topic permission, users select from one of three system-defined roles:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"publishsubscribe"})," - Provides full access to topic data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"publishonly"})," - Provides access to only write operations (",(0,r.jsx)(s.code,{children:"publish"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.em,{children:"subscribeonly"})," - Provides access to only read operations (",(0,r.jsx)(s.code,{children:"subscribe"}),")"]}),"\n"]}),"\n","\n",(0,r.jsx)(n.A,{title:"The Topic permission object",schema:c})]})}function f(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},44788:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.__monkey_patch__=function(e,s){"types"===e?Object.assign(h,s):x[e]=s},s.attrs=a,s.legacyMerge=s.keyframes=s.include=s.firstThatWorks=s.defineVars=s.default=s.createTheme=s.create=void 0,s.props=o,s.types=void 0;var r=t(73176);const i=e=>new Error(`'stylex.${e}' should never be called at runtime. It should be compiled away by '@stylexjs/babel-plugin'`),n=e=>i(`types.${e}`);function o(){const e=this;for(var s=arguments.length,t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];if(x.props)return x.props.call(e,t);const[n,o]=(0,r.styleq)(t),a={};return null!=n&&""!==n&&(a.className=n),null!=o&&Object.keys(o).length>0&&(a.style=o),a}function a(){const{className:e,style:s}=o(...arguments),t={};return null!=e&&""!==e&&(t.class=e),null!=s&&Object.keys(s).length>0&&(t.style=Object.keys(s).map((e=>`${e}:${s[e]};`)).join("")),t}const c=s.create=function(e){if(null!=x.create){return(0,x.create)(e)}throw i("create")},l=s.defineVars=function(e){if(x.defineVars)return x.defineVars(e);throw i("defineVars")},p=s.createTheme=(e,s)=>{if(x.createTheme)return x.createTheme(e,s);throw i("createTheme")},d=s.include=e=>{if(x.include)return x.include(e);throw i("include")},h=s.types={angle:e=>{throw n("angle")},color:e=>{throw n("color")},url:e=>{throw n("url")},image:e=>{throw n("image")},integer:e=>{throw n("integer")},lengthPercentage:e=>{throw n("lengthPercentage")},length:e=>{throw n("length")},percentage:e=>{throw n("percentage")},number:e=>{throw n("number")},resolution:e=>{throw n("resolution")},time:e=>{throw n("time")},transformFunction:e=>{throw n("transformFunction")},transformList:e=>{throw n("transformList")}},u=e=>{if(x.keyframes)return x.keyframes(e);throw i("keyframes")};s.keyframes=u;const m=function(){if(x.firstThatWorks)return x.firstThatWorks(...arguments);throw i("firstThatWorks")};function f(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];const[i]=(0,r.styleq)(s);return i}s.firstThatWorks=m,f.props=o,f.attrs=a,f.create=c,f.defineVars=l,f.createTheme=p,f.include=d,f.keyframes=u,f.firstThatWorks=m,f.types=h;const x={};s.legacyMerge=f;s.default=f},24874:(e,s,t)=>{"use strict";var r=t(24994).default,i=t(6305).default;s.A=void 0;var n=t(96540),o=(i(t(44788)),r(t(21432))),a=t(74848);const c=function(e,s){void 0===s&&(s="");const[t,r]=(0,n.useState)([]),i=e=>{r((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},o=function(e,r,n,c){void 0===c&&(c=0);const p=s?`${s}.${e}`:e,d=t.includes(p),h="object"===r.type||r.properties,u=l(r);return(0,a.jsxs)("div",{className:"xyi6m4r",style:c>0?{marginLeft:`${c}rem`}:void 0,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"xspum4a x117nqv4 x1jchvi3",children:e}),n?(0,a.jsx)("span",{className:"xn0kax0",children:"*"}):null," ",u.hasRefs?(0,a.jsxs)("span",{className:"xgommxb xtykwgc xodh0es",children:[u.type,u.types.map(((e,s)=>(0,a.jsxs)("span",{children:[(0,a.jsx)("a",{href:e.link,className:"xgommxb xtykwgc xodh0es x1bvjpef",children:e.type}),s<u.types.length-2?", ":s===u.types.length-2?" and ":""]},e.link)))]}):(0,a.jsx)("span",{className:"xgommxb xtykwgc xodh0es",children:u.type}),r.description&&(0,a.jsx)("p",{className:"x1nrrp6k",children:r.description}),r.enum&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"x1nrrp6k",children:"Allowed values: "}),(0,a.jsx)("span",{className:"x1nrrp6k x1k4tb9n",children:r.enum.join(", ")})]}),h&&!d&&(0,a.jsx)("button",{onClick:()=>i(p),className:"xjbqb8w x6huhpg xur7f20 x1ypdohk xgommxb x1uz70x1",children:"Show properties"}),h&&d&&r.properties&&(0,a.jsxs)("div",{className:"xbi3e5j xur7f20 x1b58sdr x1mjqqkp",children:[(0,a.jsx)("button",{onClick:()=>i(p),className:"xjbqb8w x1gs6z28 x1ypdohk x1ma63tm xt0b8zv",children:"Hide properties"}),(0,a.jsx)("div",{className:"x1mjqqkp xfdw14f x1ujl171",children:Object.entries(r.properties).map((e=>{let[s,t]=e;const i=r.required?.includes(s);return o(s,t,i,c+1)}))})]})]}),(0,a.jsx)("hr",{})]},p)};return e&&e.properties&&"object"==typeof e.properties?Object.entries(e.properties).map((s=>{let[t,r]=s;return o(t,r,e.required?.includes(t))})):(0,a.jsx)("div",{className:"x1e2nbdu x117nqv4",children:"Invalid schema structure"})},l=e=>{let s={hasRefs:!1,type:e.type};return e.enum?s.type="enum":e.properties?s.type="object":e.items&&(s.type="array",e.items.type?s.type=`${s.type} of ${e.items.type}s`:e.items.anyOf&&(s.hasRefs=!0,s.type+=" of ",s.types=e.items.anyOf.map((e=>({type:e.$ref,link:e.link}))))),s},p=e=>{const s={};return e.examples?.length>0?e.examples[0]:(Object.entries(e.properties).forEach((e=>{let[t,r]=e;if(void 0!==r.example)s[t]=r.example;else if(r.enum&&r.enum.length>0)s[t]=r.enum[0];else switch(r.type){case"string":s[t]="string";break;case"number":case"integer":s[t]=0;break;case"boolean":s[t]=!1;break;case"array":s[t]=[];break;case"object":r.properties?s[t]=p({type:"object",properties:r.properties}):s[t]={};break;default:s[t]=null}})),s)};s.A=e=>{let{title:s,schema:t}=e;const r=p(t);return(0,a.jsxs)("div",{className:"x78zum5 x1a02dak",children:[(0,a.jsx)("div",{className:"xycev2y xlwr664 x1i8vjtc xro3qtu",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Attributes"}),(0,a.jsx)("hr",{className:"x1ev4zjr"}),c(t)]})}),(0,a.jsx)("div",{className:"xz84dc7 x1i8vjtc x1y9bi47",children:(0,a.jsx)("div",{className:"x7wzq59 xati1ur x1vua2ax xur7f20 xvg4tll x1o07c4q",children:(0,a.jsx)(o.default,{title:s,language:"json",children:JSON.stringify(r,null,2)})})})]})}},73176:(e,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.styleq=void 0;var t=new WeakMap;function r(e){var s,r,i;return null!=e&&(s=!0===e.disableCache,r=!0===e.disableMix,i=e.transform),function(){for(var e=[],n="",o=null,a=s?null:t,c=new Array(arguments.length),l=0;l<arguments.length;l++)c[l]=arguments[l];for(;c.length>0;){var p=c.pop();if(null!=p&&!1!==p)if(Array.isArray(p))for(var d=0;d<p.length;d++)c.push(p[d]);else{var h=null!=i?i(p):p;if(h.$$css){var u="";if(null!=a&&a.has(h)){var m=a.get(h);null!=m&&(u=m[0],e.push.apply(e,m[1]),a=m[2])}else{var f=[];for(var x in h){var y=h[x];"$$css"!==x&&("string"==typeof y||null===y?e.includes(x)||(e.push(x),null!=a&&f.push(x),"string"==typeof y&&(u+=u?" "+y:y)):console.error("styleq: ".concat(x," typeof ").concat(String(y),' is not "string" or "null".')))}if(null!=a){var b=new WeakMap;a.set(h,[u,f,b]),a=b}}u&&(n=n?u+" "+n:u)}else if(r)null==o&&(o={}),o=Object.assign({},h,o);else{var j=null;for(var g in h){var v=h[g];void 0!==v&&(e.includes(g)||(null!=v&&(null==o&&(o={}),null==j&&(j={}),j[g]=v),e.push(g),a=null))}null!=j&&(o=Object.assign(j,o))}}}return[n,o]}}var i=r();s.styleq=i,i.factory=r},24994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6305:(e,s,t)=>{var r=t(73738).default;function i(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:s})(e)}e.exports=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var t=i(s);if(t&&t.has(e))return t.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n},e.exports.__esModule=!0,e.exports.default=e.exports},73738:e=>{function s(t){return e.exports=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
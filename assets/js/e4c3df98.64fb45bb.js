"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[5607],{11640:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>p});var i=n(74848),o=n(28453),r=(n(42821),n(70503));const s={sidebar_position:1,sidebar_label:"Topics",displayed_sidebar:"platformSidebar",title:"Getting started with Momento Topics in .NET",description:"Learn the basic building blocks for writing .NET/C# code to interact with Momento Topics.",keywords:["momento","cache","caching","topics","pubsub","pub/sub","eda","event-driven architecture","redis","serverless","sdk","sdks","api","examples","resources","getting started","quick start","server-side","dotnet","csharp","c sharp","c#"]},c="Getting Started with Momento Topics in .NET",a={id:"platform/sdks/dotnet/topics",title:"Getting started with Momento Topics in .NET",description:"Learn the basic building blocks for writing .NET/C# code to interact with Momento Topics.",source:"@site/docs/platform/sdks/dotnet/topics.mdx",sourceDirName:"platform/sdks/dotnet",slug:"/platform/sdks/dotnet/topics",permalink:"/platform/sdks/dotnet/topics",draft:!1,unlisted:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/platform/sdks/dotnet/topics.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Topics",displayed_sidebar:"platformSidebar",title:"Getting started with Momento Topics in .NET",description:"Learn the basic building blocks for writing .NET/C# code to interact with Momento Topics.",keywords:["momento","cache","caching","topics","pubsub","pub/sub","eda","event-driven architecture","redis","serverless","sdk","sdks","api","examples","resources","getting started","quick start","server-side","dotnet","csharp","c sharp","c#"]},sidebar:"platformSidebar",previous:{title:"Cache",permalink:"/platform/sdks/dotnet/cache"},next:{title:"Observability",permalink:"/platform/sdks/dotnet/observability"}},l={},p=[{value:"Install the Momento SDK",id:"install-the-momento-sdk",level:2},{value:"Get your Momento API key",id:"get-your-momento-api-key",level:2},{value:"Set up a TopicClient",id:"set-up-a-topicclient",level:2},{value:"Publish a message to a topic",id:"publish-a-message-to-a-topic",level:2},{value:"Subscribe to a topic",id:"subscribe-to-a-topic",level:2},{value:"Running the code",id:"running-the-code",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"getting-started-with-momento-topics-in-net",children:"Getting Started with Momento Topics in .NET"})}),"\n",(0,i.jsxs)(t.p,{children:["If you need to get going quickly with .NET and Momento Topics, this page contains the basic API calls you'll need. ",(0,i.jsx)(t.a,{href:"https://github.com/momentohq/client-sdk-dotnet/tree/main/examples",children:"Check the .NET SDK examples"})," for complete, working code samples."]}),"\n",(0,i.jsx)(t.h2,{id:"install-the-momento-sdk",children:"Install the Momento SDK"}),"\n",(0,i.jsx)(t.p,{children:"Install the client library in an existing .NET project:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cli",children:"dotnet add package Momento.Sdk\n"})}),"\n",(0,i.jsx)(t.h2,{id:"get-your-momento-api-key",children:"Get your Momento API key"}),"\n",(0,i.jsxs)(t.p,{children:["You'll need a Momento API key. You can get one from the ",(0,i.jsx)(t.a,{href:"https://console.gomomento.com/",children:"Momento Web Console"}),".\nOnce you have your token, store it in an environment variable so that the Momento client can consume it:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"export MOMENTO_API_KEY=<your api key here>\n"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note"}),": it is best practice to put the API key into something like AWS Secret Manager or GCP Secret Manager instead of an environment variable for enhanced security, but we are using one here for demo purposes."]}),"\n",(0,i.jsx)(t.h2,{id:"set-up-a-topicclient",children:"Set up a TopicClient"}),"\n",(0,i.jsx)(t.p,{children:"This code creates the TopicClient that you will use to interact with your pub/sub topic."}),"\n",(0,i.jsx)(r.F,{language:"csharp",code:'new TopicClient(\r\n    TopicConfigurations.Laptop.latest(),\r\n    new EnvMomentoTokenProvider("MOMENTO_API_KEY")\r\n);\r'}),"\n",(0,i.jsx)(t.h2,{id:"publish-a-message-to-a-topic",children:"Publish a message to a topic"}),"\n",(0,i.jsx)(t.p,{children:'This is an example of publishing a message to a topic called "topic", then catching the return value to check if the publish was successful.'}),"\n",(0,i.jsx)(r.F,{language:"csharp",code:'var publishResponse =\r\n     await topicClient.PublishAsync("test-cache", "test-topic", "test-topic-value");\r\nswitch (publishResponse)\r\n{\r\n    case TopicPublishResponse.Success:\r\n        Console.WriteLine("Successfully published message to \'test-topic\'");\r\n        break;\r\n    case TopicPublishResponse.Error error:\r\n        throw new Exception($"An error occurred while publishing topic message: {error.ErrorCode}: {error}");\r\n}\r'}),"\n",(0,i.jsx)(t.h2,{id:"subscribe-to-a-topic",children:"Subscribe to a topic"}),"\n",(0,i.jsx)(t.p,{children:'This is an example of subscribing to a topic called "topic". When messages are published to this topic, the code here receives and prints them asynchronously.'}),"\n",(0,i.jsx)(r.F,{language:"csharp",code:'var produceCancellation = new CancellationTokenSource();\r\nproduceCancellation.CancelAfter(5_000);\r\n\nvar subscribeResponse = await topicClient.SubscribeAsync("test-cache", "test-topic");\r\nswitch (subscribeResponse)\r\n{\r\n    case TopicSubscribeResponse.Subscription subscription:\r\n        // Note: use `WithCancellation` to filter only the `TopicMessage` types\r\n        var cancellableSubscription = subscription.WithCancellationForAllEvents(produceCancellation.Token);\r\n\n        await Task.Delay(1_000);\r\n        await topicClient.PublishAsync("test-cache", "test-topic", "test-topic-value");\r\n        await Task.Delay(1_000);\r\n\n        await foreach (var topicEvent in cancellableSubscription)\r\n        {\r\n            switch (topicEvent)\r\n            {\r\n                case TopicMessage.Binary:\r\n                    Console.WriteLine("Received unexpected binary message from topic.");\r\n                    break;\r\n                case TopicMessage.Text text:\r\n                    Console.WriteLine($"Received string message from topic: {text.Value}");\r\n                    break;\r\n                case TopicSystemEvent.Heartbeat:\r\n                    Console.WriteLine("Received heartbeat from topic.");\r\n                    break;\r\n                case TopicSystemEvent.Discontinuity discontinuity:\r\n                    Console.WriteLine($"Received discontinuity from topic: {discontinuity}");\r\n                    break;\r\n                case TopicMessage.Error error:\r\n                    throw new Exception($"An error occurred while receiving topic message: {error.ErrorCode}: {error}");\r\n                default:\r\n                    throw new Exception("Bad message received");\r\n            }\r\n        }\r\n        subscription.Dispose();\r\n        break;\r\n    case TopicSubscribeResponse.Error error:\r\n        throw new Exception($"An error occurred subscribing to a topic: {error.ErrorCode}: {error}");\r\n}\r'}),"\n",(0,i.jsx)(t.h2,{id:"running-the-code",children:"Running the code"}),"\n",(0,i.jsxs)(t.p,{children:["You can find complete, working examples in the ",(0,i.jsx)(t.a,{href:"https://github.com/momentohq/client-sdk-dotnet/tree/main/examples",children:".NET SDK GitHub repo examples directory"}),"."]}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:["Beyond these basic API calls check out the ",(0,i.jsx)(t.a,{href:"/topics/api-reference",children:"API reference page"})," for more information on the full assortment of Momento API calls."]})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},42821:(e,t,n)=>{n(96540)},70503:(e,t,n)=>{n.d(t,{F:()=>r});var i=n(21432),o=(n(96540),n(74848));const r=e=>{let{language:t,code:n}=e;return(0,o.jsx)(i.A,{language:t,children:n})}}}]);
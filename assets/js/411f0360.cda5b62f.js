"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[2042],{85710:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var o=t(74848),r=t(28453);const s={sidebar_position:1,sidebar_label:"Cache",displayed_sidebar:"platformSidebar",title:"Getting started with Momento Cache in PHP",description:"Learn the basic building blocks for writing PHP code to interact with Momento Cache.",keywords:["momento","cache","caching","topics","pubsub","pub/sub","eda","event-driven architecture","redis","serverless","sdk","sdks","api","examples","resources","getting started","quick start","server-side","php","laravel","drupal"]},i="Getting Started with Momento Cache in PHP",a={id:"platform/sdks/php/cache",title:"Getting started with Momento Cache in PHP",description:"Learn the basic building blocks for writing PHP code to interact with Momento Cache.",source:"@site/docs/platform/sdks/php/cache.mdx",sourceDirName:"platform/sdks/php",slug:"/platform/sdks/php/cache",permalink:"/platform/sdks/php/cache",draft:!1,unlisted:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/platform/sdks/php/cache.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"Cache",displayed_sidebar:"platformSidebar",title:"Getting started with Momento Cache in PHP",description:"Learn the basic building blocks for writing PHP code to interact with Momento Cache.",keywords:["momento","cache","caching","topics","pubsub","pub/sub","eda","event-driven architecture","redis","serverless","sdk","sdks","api","examples","resources","getting started","quick start","server-side","php","laravel","drupal"]},sidebar:"platformSidebar",previous:{title:"PHP",permalink:"/platform/sdks/php/"},next:{title:"Swift",permalink:"/platform/sdks/swift/"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Configure composer to get the PHP SDK",id:"configure-composer-to-get-the-php-sdk",level:3},{value:"Import libraries and connect to return a CacheClient object",id:"import-libraries-and-connect-to-return-a-cacheclient-object",level:2},{value:"Create a new cache in Momento Cache",id:"create-a-new-cache-in-momento-cache",level:2},{value:"Get list of existing caches in your account",id:"get-list-of-existing-caches-in-your-account",level:2},{value:"Write an item to a cache",id:"write-an-item-to-a-cache",level:2},{value:"Read an item from a cache",id:"read-an-item-from-a-cache",level:2},{value:"Delete the test cache",id:"delete-the-test-cache",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"getting-started-with-momento-cache-in-php",children:"Getting Started with Momento Cache in PHP"})}),"\n",(0,o.jsx)(n.p,{children:"If you need to get going quickly with PHP and Momento Cache, this page contains the basic API calls you'll need."}),"\n",(0,o.jsxs)(n.p,{children:["For more info, you can also see ",(0,o.jsx)(n.a,{href:"https://github.com/momentohq/client-sdk-php",children:"the PHP SDK on GitHub"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["A Momento API Key is required. You can generate one using ",(0,o.jsx)(n.a,{href:"https://console.gomomento.com/",children:"the Momento console"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Installation of PHP 8.0 or higher"}),"\n",(0,o.jsxs)(n.li,{children:["Installation of the ",(0,o.jsx)(n.a,{href:"https://github.com/grpc/grpc/blob/master/src/php/README.md",children:"gRPC PHP extension"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Installation of the ",(0,o.jsx)(n.a,{href:"https://developers.google.com/google-ads/api/docs/client-libs/php/protobuf#c_implementation",children:"protobuf C extension"})]}),"\n",(0,o.jsxs)(n.li,{children:["Installation of ",(0,o.jsx)(n.a,{href:"https://getcomposer.org/doc/00-intro.md",children:"Composer"}),"  - A common library and dependency manager for PHP."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"configure-composer-to-get-the-php-sdk",children:"Configure composer to get the PHP SDK"}),"\n",(0,o.jsxs)(n.p,{children:["Add our repository to your ",(0,o.jsx)(n.code,{children:"composer.json"})," file and our SDK as a dependency:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "require": {\n    "momentohq/client-sdk-php": "1.11.1"\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Run ",(0,o.jsx)(n.code,{children:"composer update"})," to install the necessary prerequisites."]}),"\n",(0,o.jsx)(n.h2,{id:"import-libraries-and-connect-to-return-a-cacheclient-object",children:"Import libraries and connect to return a CacheClient object"}),"\n",(0,o.jsxs)(n.p,{children:["This code sets up the ",(0,o.jsx)(n.a,{href:"https://github.com/momentohq/client-sdk-php/blob/main/examples/example.php",children:"example file"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'<?php\ndeclare(strict_types=1);\n\nrequire "vendor/autoload.php";\n\nuse Momento\\Auth\\CredentialProvider;\nuse Momento\\Cache\\CacheClient;\nuse Momento\\Config\\Configurations\\Laptop;\nuse Momento\\Logging\\StderrLoggerFactory;\nuse Psr\\Log\\LoggerInterface;\n\n$CACHE_NAME = uniqid("php-example-");\n$ITEM_DEFAULT_TTL_SECONDS = 60;\n$KEY = "MyKey";\n$VALUE = "MyValue";\n\n// Setup\n$authProvider = CredentialProvider::fromEnvironmentVariable("MOMENTO_API_KEY");\n$configuration = Laptop::latest(new StderrLoggerFactory());\n$client = new CacheClient($configuration, $authProvider, $ITEM_DEFAULT_TTL_SECONDS);\n$logger = $configuration->getLoggerFactory()->getLogger("ex:");\n\nfunction printBanner(string $message, LoggerInterface $logger): void\n{\n    $line = "******************************************************************";\n    $logger->info($line);\n    $logger->info($message);\n    $logger->info($line);\n}\n\nprintBanner("*                      Momento Example Start                     *", $logger);\n'})}),"\n",(0,o.jsx)(n.h2,{id:"create-a-new-cache-in-momento-cache",children:"Create a new cache in Momento Cache"}),"\n",(0,o.jsx)(n.p,{children:"This function creates a new cache in your Momento account."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'$response = $client->createCache($CACHE_NAME);\nif ($response->asSuccess()) {\n    $logger->info("Created cache " . $CACHE_NAME . "\\n");\n} elseif ($response->asError()) {\n    $logger->info("Error creating cache: " . $response->asError()->message() . "\\n");\n    exit;\n} elseif ($response->asAlreadyExists()) {\n    $logger->info("Cache " . $CACHE_NAME . " already exists.\\n");\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"get-list-of-existing-caches-in-your-account",children:"Get list of existing caches in your account"}),"\n",(0,o.jsx)(n.p,{children:"In this example, we use the CacheClient function above to list all of the caches for the Momento account and trap any errors."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'// List cache\n$response = $client->listCaches();\nif ($response->asSuccess()) {\n    $logger->info("SUCCESS: List caches: \\n");\n    foreach ($response->asSuccess()->caches() as $cache) {\n        $cacheName = $cache->name();\n        $logger->info("$cacheName\\n");\n    }\n    $logger->info("\\n");\n} elseif ($response->asError()) {\n    $logger->info("Error listing cache: " . $response->asError()->message() . "\\n");\n    exit;\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"write-an-item-to-a-cache",children:"Write an item to a cache"}),"\n",(0,o.jsx)(n.p,{children:"A simple example of doing a set operation. In the client.set call, the TTL it optional. If you did pass it in, this would override the default TTL value set with the client connection object."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'// Set\n$logger->info("Setting key: $KEY to value: $VALUE\\n");\n$response = $client->set($CACHE_NAME, $KEY, $VALUE);\nif ($response->asSuccess()) {\n    $logger->info("SUCCESS: - Set key: " . $KEY . " value: " . $VALUE . " cache: " . $CACHE_NAME . "\\n");\n} elseif ($response->asError()) {\n    $logger->info("Error setting key: " . $response->asError()->message() . "\\n");\n    exit;\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"read-an-item-from-a-cache",children:"Read an item from a cache"}),"\n",(0,o.jsx)(n.p,{children:"This is an example of a simple read operation to get an item from a cache."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'// Get\n$logger->info("Getting value for key: $KEY\\n");\n$response = $client->get($CACHE_NAME, $KEY);\nif ($response->asHit()) {\n    $logger->info("SUCCESS: - Get key: " . $KEY . " value: " . $response->asHit()->valueString() . " cache: " . $CACHE_NAME . "\\n");\n} elseif ($response->asMiss()) {\n    $logger->info("Get operation was a MISS\\n");\n} elseif ($response->asError()) {\n    $logger->info("Error getting cache: " . $response->asError()->message() . "\\n");\n    exit;\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"delete-the-test-cache",children:"Delete the test cache"}),"\n",(0,o.jsx)(n.p,{children:"An example of deleting the test cache we created earlier."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:'// Delete test cache\n$logger->info("Deleting cache $CACHE_NAME\\n");\n$response = $client->deleteCache($CACHE_NAME);\nif ($response->asError()) {\n    $logger->info("Error deleting cache: " . $response->asError()->message() . "\\n");\n}\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Beyond these basic API calls check out the ",(0,o.jsx)(n.a,{href:"/cache/develop/api-reference/",children:"API reference page"})," for more information on the full assortment of Momento API calls."]})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(96540);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);
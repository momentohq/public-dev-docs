"use strict";(globalThis.webpackChunkmomento_docs=globalThis.webpackChunkmomento_docs||[]).push([[7128],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>l});var s=n(96540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}},46676:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"objectstore/http-api","title":"HTTP API for Momento Object Store","description":"HTTP API reference for Momento Object Store.","source":"@site/docs/objectstore/http-api.md","sourceDirName":"objectstore","slug":"/objectstore/http-api","permalink":"/objectstore/http-api","draft":false,"unlisted":true,"editUrl":"https://github.com/momentohq/public-dev-docs/tree/main/docs/objectstore/http-api.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"HTTP API","title":"HTTP API for Momento Object Store","description":"HTTP API reference for Momento Object Store.","unlisted":true}}');var r=n(74848),i=n(28453);const o={sidebar_label:"HTTP API",title:"HTTP API for Momento Object Store",description:"HTTP API reference for Momento Object Store.",unlisted:!0},l="HTTP API Reference for Momento Object Store",c={},d=[{value:"Authentication",id:"authentication",level:2},{value:"Create Object Store",id:"create-object-store",level:2},{value:"Request",id:"request",level:3},{value:"Path Parameters",id:"path-parameters",level:4},{value:"Headers",id:"headers",level:4},{value:"Request Body",id:"request-body",level:4},{value:"Response",id:"response",level:3},{value:"Created",id:"created",level:4},{value:"Error",id:"error",level:4},{value:"Describe Object Store",id:"describe-object-store",level:2},{value:"Request",id:"request-1",level:3},{value:"Path Parameters",id:"path-parameters-1",level:4},{value:"Headers",id:"headers-1",level:4},{value:"Response",id:"response-1",level:3},{value:"Success",id:"success",level:4},{value:"Error",id:"error-1",level:4},{value:"Delete Object Store",id:"delete-object-store",level:2},{value:"Request",id:"request-2",level:3},{value:"Path Parameters",id:"path-parameters-2",level:4},{value:"Headers",id:"headers-2",level:4},{value:"Response",id:"response-2",level:3},{value:"Success",id:"success-1",level:4},{value:"Error",id:"error-2",level:4},{value:"List Object Stores",id:"list-object-stores",level:2},{value:"Request",id:"request-3",level:3},{value:"Headers",id:"headers-3",level:4},{value:"Response",id:"response-3",level:3},{value:"Success",id:"success-2",level:4},{value:"Error",id:"error-3",level:4},{value:"Put Object",id:"put-object",level:2},{value:"Request",id:"request-4",level:3},{value:"Body",id:"body",level:4},{value:"Path Parameters",id:"path-parameters-3",level:4},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Headers",id:"headers-4",level:4},{value:"Response",id:"response-4",level:3},{value:"Success",id:"success-3",level:4},{value:"Error",id:"error-4",level:4},{value:"Get Object",id:"get-object",level:2},{value:"Request",id:"request-5",level:3},{value:"Path Parameters",id:"path-parameters-4",level:4},{value:"Headers",id:"headers-5",level:4},{value:"Response",id:"response-5",level:3},{value:"Hit",id:"hit",level:4},{value:"Miss",id:"miss",level:4},{value:"Error",id:"error-5",level:4},{value:"Control Plane Examples",id:"control-plane-examples",level:2},{value:"Create Object Store",id:"create-object-store-1",level:3},{value:"List Object Stores",id:"list-object-stores-1",level:3},{value:"Describe Object Store",id:"describe-object-store-1",level:3},{value:"Delete Object Store",id:"delete-object-store-1",level:3},{value:"Data Plane Examples",id:"data-plane-examples",level:2},{value:"Put Object",id:"put-object-1",level:3},{value:"Get Object",id:"get-object-1",level:3},{value:"Status Values",id:"status-values",level:3},{value:"CloudFormation Template",id:"cloudformation-template",level:2},{value:"Deploying the Template",id:"deploying-the-template",level:2},{value:"Trust Policy",id:"trust-policy",level:2},{value:"Required S3 Permissions",id:"required-s3-permissions",level:2},{value:"CloudFormation Template",id:"cloudformation-template-1",level:2},{value:"Deploying the Template",id:"deploying-the-template-1",level:2},{value:"Required CloudWatch Permissions",id:"required-cloudwatch-permissions",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"http-api-reference-for-momento-object-store",children:"HTTP API Reference for Momento Object Store"})}),"\n",(0,r.jsx)(t.p,{children:"Momento provides an HTTP API interface for storing and retrieving objects from your own S3 bucket with automatic caching in your own Momento Valkey Cluster."}),"\n",(0,r.jsx)(t.admonition,{title:"Info",type:"tip",children:(0,r.jsxs)(t.p,{children:["The Momento platform is region-based with endpoints specific to each region. To view a list of supported regions and their endpoints, ",(0,r.jsx)(t.a,{href:"/platform/regions",children:"click here"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsxs)(t.p,{children:["You will need a Momento API Key generated via the ",(0,r.jsx)(t.a,{href:"https://console.gomomento.com/key",children:"Momento console"}),". Momento API Keys control access to the Momento services and can be set to expire."]}),"\n",(0,r.jsxs)(t.p,{children:["The API Key must be provided in the ",(0,r.jsx)(t.code,{children:"Authorization"})," header."]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"control-plane-api",children:"Control Plane API"}),"\n",(0,r.jsx)(t.p,{children:"The Control Plane API allows you to manage object stores - creating, listing, describing, and deleting them."}),"\n",(0,r.jsx)(t.h2,{id:"create-object-store",children:"Create Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Creates a new object store with the specified configuration."}),"\n",(0,r.jsx)(t.h3,{id:"request",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore/{storeName}"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: PUT"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storeName"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"URL-safe string"}),(0,r.jsx)(t.td,{children:"The name of the object store."})]})})]}),"\n",(0,r.jsx)(t.h4,{id:"headers",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento API key, in string format, is used for authentication/authorization of the request."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Content-Type"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["Must be ",(0,r.jsx)(t.code,{children:"application/json"}),"."]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"request-body",children:"Request Body"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "storage_config": {\n    "s3": {\n      "bucket_name": "my-s3-bucket",\n      "prefix": "optional/prefix/path",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoObjectStoreRole"\n    }\n  },\n  "cache_config": {\n    "valkey_cluster": {\n      "cluster_name": "my-valkey-cluster"\n    }\n  },\n  "access_logging_config": {\n    "cloudwatch": {\n      "log_group_name": "/momento/objectstore/my-store",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoCloudWatchRole",\n      "region": "us-east-1"\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Field"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storage_config.s3.bucket_name"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The name of your S3 bucket."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storage_config.s3.prefix"}),(0,r.jsx)(t.td,{children:"no"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"Optional prefix path within the bucket."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storage_config.s3.iam_role_arn"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The ARN of the IAM role that Momento will assume to access your S3 bucket. See ",(0,r.jsx)(t.a,{href:"#appendix-s3-iam-role-setup",children:"Appendix: S3 IAM Role Setup"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"cache_config.valkey_cluster.cluster_name"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The name of the Momento Valkey Cluster to use for caching. This must be the name of an existing cluster."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"access_logging_config"}),(0,r.jsx)(t.td,{children:"no"}),(0,r.jsx)(t.td,{children:"Object"}),(0,r.jsx)(t.td,{children:"Optional configuration for access logging."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"access_logging_config.cloudwatch.log_group_name"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The CloudWatch Log Group name where access logs will be delivered. The log group must already exist."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"access_logging_config.cloudwatch.iam_role_arn"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The ARN of the IAM role that Momento will assume to write logs. See ",(0,r.jsx)(t.a,{href:"#appendix-cloudwatch-iam-role-setup",children:"Appendix: CloudWatch IAM Role Setup"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"access_logging_config.cloudwatch.region"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The AWS region where the CloudWatch Log Group is located."})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"response",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"created",children:"Created"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 201 Created"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "name": "my-store",\n  "storage_config": {\n    "s3": {\n      "bucket_name": "my-s3-bucket",\n      "prefix": "optional/prefix/path",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoObjectStoreRole"\n    }\n  },\n  "cache_config": {\n    "valkey_cluster": {\n      "cluster_name": "my-valkey-cluster"\n    }\n  },\n  "access_logging_config": {\n    "cloudwatch": {\n      "log_group_name": "/momento/objectstore/my-store",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoCloudWatchRole",\n      "region": "us-east-1"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"error",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 400 Bad Request"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the request was incorrectly specified. See the message body for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento API key passed in is either invalid or expired. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 403 Forbidden"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates the Momento API key passed in does not grant the required access. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues. Contact Momento support for further assistance."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"describe-object-store",children:"Describe Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Retrieves the configuration details of an object store."}),"\n",(0,r.jsx)(t.h3,{id:"request-1",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore/{storeName}"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: GET"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"path-parameters-1",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storeName"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"URL-safe string"}),(0,r.jsx)(t.td,{children:"The name of the object store."})]})})]}),"\n",(0,r.jsx)(t.h4,{id:"headers-1",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento API key, in string format, is used for authentication/authorization of the request."})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"response-1",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"success",children:"Success"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 200 OK"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "name": "my-store",\n  "storage_config": {\n    "s3": {\n      "bucket_name": "my-s3-bucket",\n      "prefix": "optional/prefix/path",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoObjectStoreRole"\n    }\n  },\n  "cache_config": {\n    "valkey_cluster": {\n      "cluster_name": "my-valkey-cluster"\n    }\n  },\n  "access_logging_config": {\n    "cloudwatch": {\n      "log_group_name": "/momento/objectstore/my-store",\n      "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoCloudWatchRole",\n      "region": "us-east-1"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"access_logging_config"})," field is only present if access logging is configured for the object store."]})}),"\n",(0,r.jsx)(t.h4,{id:"error-1",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento API key passed in is either invalid or expired."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 404 Not Found"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"The specified object store does not exist."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"delete-object-store",children:"Delete Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Deletes an object store."}),"\n",(0,r.jsx)(t.h3,{id:"request-2",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore/{storeName}"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: DELETE"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"path-parameters-2",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storeName"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"URL-safe string"}),(0,r.jsx)(t.td,{children:"The name of the object store."})]})})]}),"\n",(0,r.jsx)(t.h4,{id:"headers-2",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento API key, in string format, is used for authentication/authorization of the request."})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"response-2",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"success-1",children:"Success"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 200 OK"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"The object store was successfully deleted."}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"error-2",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento API key passed in is either invalid or expired."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 404 Not Found"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"The specified object store does not exist."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"list-object-stores",children:"List Object Stores"}),"\n",(0,r.jsx)(t.p,{children:"Lists all object stores in your account."}),"\n",(0,r.jsx)(t.h3,{id:"request-3",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: GET"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"headers-3",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento API key, in string format, is used for authentication/authorization of the request."})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"response-3",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"success-2",children:"Success"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 200 OK"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "object_stores": [\n    { "name": "my-store" },\n    { "name": "another-store" }\n  ]\n}\n'})}),"\n",(0,r.jsx)(t.h4,{id:"error-3",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento API key passed in is either invalid or expired."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues."}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"data-plane-api",children:"Data Plane API"}),"\n",(0,r.jsx)(t.p,{children:"The Data Plane API allows you to store and retrieve objects from your object store."}),"\n",(0,r.jsx)(t.h2,{id:"put-object",children:"Put Object"}),"\n",(0,r.jsx)(t.p,{children:"Stores an object in the specified object store."}),"\n",(0,r.jsx)(t.h3,{id:"request-4",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore/{storeName}/{key}"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: PUT"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"body",children:"Body"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Content-Type: application/octet-stream"}),"\n",(0,r.jsx)(t.li,{children:"The body of the request should contain the binary data to be stored."}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"path-parameters-3",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storeName"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"URL-safe string"}),(0,r.jsx)(t.td,{children:"The name of the object store to operate on."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"key"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The key for the object. Supports hierarchical paths (e.g., ",(0,r.jsx)(t.code,{children:"folder/subfolder/file.txt"}),")."]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ttl_seconds"}),(0,r.jsx)(t.td,{children:"no"}),(0,r.jsx)(t.td,{children:"Integer"}),(0,r.jsx)(t.td,{children:"Optional time-to-live in seconds. If not specified, the object persists indefinitely."})]})})]}),"\n",(0,r.jsx)(t.h4,{id:"headers-4",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento auth token, in string format, is used for authentication/authorization of the request."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"mo-meta-*"}),(0,r.jsx)(t.td,{children:"no"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["Custom metadata headers. Any header prefixed with ",(0,r.jsx)(t.code,{children:"mo-meta-"})," will be stored with the object and returned on GET. The prefix is stripped when storing (e.g., ",(0,r.jsx)(t.code,{children:"mo-meta-content-type"})," is stored as ",(0,r.jsx)(t.code,{children:"content-type"}),")."]})]})]})]}),"\n",(0,r.jsxs)(t.admonition,{title:"Blocked Metadata Headers",type:"info",children:[(0,r.jsx)(t.p,{children:"For security reasons, certain metadata header names are blocked and will be ignored:"}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["HTTP protocol headers: ",(0,r.jsx)(t.code,{children:"content-length"}),", ",(0,r.jsx)(t.code,{children:"transfer-encoding"}),", ",(0,r.jsx)(t.code,{children:"connection"}),", ",(0,r.jsx)(t.code,{children:"keep-alive"}),", ",(0,r.jsx)(t.code,{children:"upgrade"}),", ",(0,r.jsx)(t.code,{children:"trailer"}),", ",(0,r.jsx)(t.code,{children:"te"})]}),"\n",(0,r.jsxs)(t.li,{children:["Security headers: ",(0,r.jsx)(t.code,{children:"set-cookie"}),", ",(0,r.jsx)(t.code,{children:"cookie"}),", ",(0,r.jsx)(t.code,{children:"authorization"}),", ",(0,r.jsx)(t.code,{children:"www-authenticate"}),", ",(0,r.jsx)(t.code,{children:"content-security-policy"}),", ",(0,r.jsx)(t.code,{children:"x-frame-options"}),", ",(0,r.jsx)(t.code,{children:"strict-transport-security"})]}),"\n",(0,r.jsxs)(t.li,{children:["CORS headers: ",(0,r.jsx)(t.code,{children:"access-control-allow-origin"}),", ",(0,r.jsx)(t.code,{children:"access-control-allow-credentials"}),", etc."]}),"\n",(0,r.jsxs)(t.li,{children:["Proxy headers: ",(0,r.jsx)(t.code,{children:"host"}),", ",(0,r.jsx)(t.code,{children:"x-forwarded-for"}),", ",(0,r.jsx)(t.code,{children:"x-real-ip"}),", ",(0,r.jsx)(t.code,{children:"via"}),", etc."]}),"\n"]})]}),"\n",(0,r.jsx)(t.h3,{id:"response-4",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"success-3",children:"Success"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 204 No Content"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"The object was successfully stored."}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"error-4",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 400 Bad Request"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the request was incorrectly specified. See the message body for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento API key passed in is either invalid or expired. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 403 Forbidden"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates the Momento API key passed in does not grant the required access to the resources you attempted. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 404 Not Found"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:'"Store Not Found" indicates that the specified object store does not exist.'}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 429 Too Many Requests"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that account limits were exceeded. See the message body for further details, or contact Momento support to request a limit increase."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues. Contact Momento support for further assistance."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"get-object",children:"Get Object"}),"\n",(0,r.jsx)(t.p,{children:"Retrieves an object from the specified object store."}),"\n",(0,r.jsx)(t.h3,{id:"request-5",children:"Request"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Path: /objectstore/{storeName}/{key}"}),"\n",(0,r.jsx)(t.li,{children:"HTTP Method: GET"}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"path-parameters-4",children:"Path Parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storeName"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"URL-safe string"}),(0,r.jsx)(t.td,{children:"The name of the object store to operate on."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"key"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The key for the object. Supports hierarchical paths (e.g., ",(0,r.jsx)(t.code,{children:"folder/subfolder/file.txt"}),")."]})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"headers-5",children:"Headers"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Header\xa0name"}),(0,r.jsx)(t.th,{children:"Required?"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Authorization"}),(0,r.jsx)(t.td,{children:"yes"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The Momento auth token, in string format, is used for authentication/authorization of the request."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"read-concern"}),(0,r.jsx)(t.td,{children:"no"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["Controls cache read behavior. Values: ",(0,r.jsx)(t.code,{children:"balanced"})," (default) - reads from an AZ-aligned cache node if available; ",(0,r.jsx)(t.code,{children:"consistent"})," - always reads from the primary cache node."]})]})]})]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["Regardless of the ",(0,r.jsx)(t.code,{children:"read-concern"})," value, Momento always falls back to S3 if the object is not found in the cache."]})}),"\n",(0,r.jsx)(t.h3,{id:"response-5",children:"Response"}),"\n",(0,r.jsx)(t.h4,{id:"hit",children:"Hit"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 200 OK"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Body: The binary data stored at the specified key."}),"\n",(0,r.jsx)(t.li,{children:"Any custom metadata headers stored with the object will be returned as response headers."}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"miss",children:"Miss"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 404 Not Found"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:'"Object not found." indicates that the key was not present in the object store.'}),"\n"]}),"\n",(0,r.jsx)(t.h4,{id:"error-5",children:"Error"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 400 Bad Request"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the request was incorrectly specified. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 401 Unauthorized"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the Momento auth token passed in is either invalid or expired. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 403 Forbidden"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates the Momento auth token passed in does not grant the required access to the resources you attempted. See the body of the message for further details."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 404 Not Found"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:'"Store Not Found" indicates that the specified object store does not exist.'}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 429 Too Many Requests"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that account limits were exceeded. See the body of the message for further details, or contact Momento support to request a limit increase."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.em,{children:"Status Code: 500 Internal Server Error"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"This error type typically indicates that the service is experiencing issues. Contact Momento support for further assistance."}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(t.h2,{id:"control-plane-examples",children:"Control Plane Examples"}),"\n",(0,r.jsx)(t.h3,{id:"create-object-store-1",children:"Create Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Create a new object store:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X PUT -H "Authorization: <token>" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "storage_config": {\n      "s3": {\n        "bucket_name": "my-s3-bucket",\n        "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoObjectStoreRole"\n      }\n    },\n    "cache_config": {\n      "valkey_cluster": {\n        "cluster_name": "my-valkey-cluster"\n      }\n    }\n  }\' \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Create an object store with access logging enabled:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X PUT -H "Authorization: <token>" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "storage_config": {\n      "s3": {\n        "bucket_name": "my-s3-bucket",\n        "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoObjectStoreRole"\n      }\n    },\n    "cache_config": {\n      "valkey_cluster": {\n        "cluster_name": "my-valkey-cluster"\n      }\n    },\n    "access_logging_config": {\n      "cloudwatch": {\n        "log_group_name": "/momento/objectstore/my-store",\n        "iam_role_arn": "arn:aws:iam::123456789012:role/MomentoCloudWatchRole",\n        "region": "us-east-1"\n      }\n    }\n  }\' \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"list-object-stores-1",children:"List Object Stores"}),"\n",(0,r.jsx)(t.p,{children:"List all object stores:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -H "Authorization: <token>" \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"describe-object-store-1",children:"Describe Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Get details of an object store:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -H "Authorization: <token>" \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"delete-object-store-1",children:"Delete Object Store"}),"\n",(0,r.jsx)(t.p,{children:"Delete an object store:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X DELETE -H "Authorization: <token>" \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store"\n'})}),"\n",(0,r.jsx)(t.h2,{id:"data-plane-examples",children:"Data Plane Examples"}),"\n",(0,r.jsx)(t.h3,{id:"put-object-1",children:"Put Object"}),"\n",(0,r.jsxs)(t.p,{children:["Store a file at the path ",(0,r.jsx)(t.code,{children:"images/logo.png"})," in the ",(0,r.jsx)(t.em,{children:"my-store"})," object store:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X PUT -H "Authorization: <token>" \\\n  -H "Content-Type: application/octet-stream" \\\n  --data-binary @logo.png \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store/images/logo.png"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Store with a TTL of 1 hour (3600 seconds):"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X PUT -H "Authorization: <token>" \\\n  -H "Content-Type: application/octet-stream" \\\n  --data-binary @logo.png \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store/images/logo.png?ttl_seconds=3600"\n'})}),"\n",(0,r.jsx)(t.p,{children:"Store with custom metadata:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -X PUT -H "Authorization: <token>" \\\n  -H "Content-Type: application/octet-stream" \\\n  -H "mo-meta-content-type: image/png" \\\n  -H "mo-meta-cache-control: max-age=86400" \\\n  --data-binary @logo.png \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store/images/logo.png"\n'})}),"\n",(0,r.jsx)(t.h3,{id:"get-object-1",children:"Get Object"}),"\n",(0,r.jsxs)(t.p,{children:["Retrieve an object at the path ",(0,r.jsx)(t.code,{children:"images/logo.png"})," from the ",(0,r.jsx)(t.em,{children:"my-store"})," object store:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'curl -H "Authorization: <token>" \\\n  "https://api.cache.cell-1-us-east-1-1.prod.a.momentohq.com/objectstore/my-store/images/logo.png" \\\n  --output logo.png\n'})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"access-log-format",children:"Access Log Format"}),"\n",(0,r.jsx)(t.p,{children:"When access logging is enabled, Momento delivers logs to your CloudWatch Log Group. Each log entry is a JSON object with the following fields:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "timestamp": 1707580800000,\n  "operation": "read",\n  "key": "images/logo.png",\n  "store": "my-store",\n  "status": "cache_hit",\n  "size": 15234\n}\n'})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Field"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"timestamp"}),(0,r.jsx)(t.td,{children:"Integer"}),(0,r.jsx)(t.td,{children:"Unix timestamp in milliseconds when the operation occurred."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"operation"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsxs)(t.td,{children:["The type of operation: ",(0,r.jsx)(t.code,{children:"read"})," or ",(0,r.jsx)(t.code,{children:"write"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"key"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The object key that was accessed."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"store"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The name of the object store."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"status"}),(0,r.jsx)(t.td,{children:"String"}),(0,r.jsx)(t.td,{children:"The result of the operation (see below)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"size"}),(0,r.jsx)(t.td,{children:"Integer"}),(0,r.jsx)(t.td,{children:"The size of the object in bytes. Only present for successful operations."})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"status-values",children:"Status Values"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Status"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"ok"})}),(0,r.jsx)(t.td,{children:"Write operation completed successfully."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"cache_hit"})}),(0,r.jsx)(t.td,{children:"Read operation found the object in the cache."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"storage_hit"})}),(0,r.jsx)(t.td,{children:"Read operation found the object in S3 storage (cache miss)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"miss"})}),(0,r.jsx)(t.td,{children:"Read operation did not find the object."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"error"})}),(0,r.jsx)(t.td,{children:"The operation failed due to an error."})]})]})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"appendix-s3-iam-role-setup",children:"Appendix: S3 IAM Role Setup"}),"\n",(0,r.jsx)(t.p,{children:"To allow Momento to access your S3 bucket, you need to create an IAM role that Momento can assume. This role must trust Momento's AWS account and have permissions to access your S3 bucket."}),"\n",(0,r.jsx)(t.h2,{id:"cloudformation-template",children:"CloudFormation Template"}),"\n",(0,r.jsx)(t.p,{children:"Below is a CloudFormation template that creates the required IAM role:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "AWSTemplateFormatVersion": "2010-09-09",\n  "Description": "IAM Role that allows Momento to access your S3 bucket",\n  "Parameters": {\n    "S3BucketName": {\n      "Type": "String",\n      "Description": "The name of the S3 bucket Momento will access"\n    }\n  },\n  "Resources": {\n    "MomentoS3IamRole": {\n      "Type": "AWS::IAM::Role",\n      "Properties": {\n        "RoleName": "MomentoObjectStoreRole",\n        "Description": "IAM Role that allows Momento to access S3",\n        "AssumeRolePolicyDocument": {\n          "Version": "2012-10-17",\n          "Statement": [\n            {\n              "Effect": "Allow",\n              "Principal": {\n                "AWS": "arn:aws:iam::168253909317:root"\n              },\n              "Action": "sts:AssumeRole"\n            }\n          ]\n        },\n        "Policies": [\n          {\n            "PolicyName": "MomentoS3Access",\n            "PolicyDocument": {\n              "Version": "2012-10-17",\n              "Statement": [\n                {\n                  "Sid": "AllowS3BucketAccess",\n                  "Effect": "Allow",\n                  "Action": [\n                    "s3:GetObject",\n                    "s3:PutObject",\n                    "s3:DeleteObject",\n                    "s3:ListBucket"\n                  ],\n                  "Resource": [\n                    { "Fn::Sub": "arn:aws:s3:::${S3BucketName}" },\n                    { "Fn::Sub": "arn:aws:s3:::${S3BucketName}/*" }\n                  ]\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  },\n  "Outputs": {\n    "RoleArn": {\n      "Description": "The ARN of the IAM role to use when creating the object store",\n      "Value": { "Fn::GetAtt": ["MomentoS3IamRole", "Arn"] }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"deploying-the-template",children:"Deploying the Template"}),"\n",(0,r.jsx)(t.p,{children:"You can deploy this template using the AWS CLI:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws cloudformation create-stack \\\n  --stack-name momento-object-store-role \\\n  --template-body file://momento-iam-role.json \\\n  --parameters ParameterKey=S3BucketName,ParameterValue=my-s3-bucket \\\n  --capabilities CAPABILITY_NAMED_IAM\n"})}),"\n",(0,r.jsx)(t.p,{children:"After the stack is created, retrieve the role ARN:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws cloudformation describe-stacks \\\n  --stack-name momento-object-store-role \\\n  --query \"Stacks[0].Outputs[?OutputKey=='RoleArn'].OutputValue\" \\\n  --output text\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Use this ARN as the ",(0,r.jsx)(t.code,{children:"iam_role_arn"})," when creating your object store."]}),"\n",(0,r.jsx)(t.h2,{id:"trust-policy",children:"Trust Policy"}),"\n",(0,r.jsxs)(t.p,{children:["The key component is the trust policy that allows Momento's AWS account (",(0,r.jsx)(t.code,{children:"168253909317"}),") to assume this role:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "AWS": "arn:aws:iam::168253909317:root"\n      },\n      "Action": "sts:AssumeRole"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"required-s3-permissions",children:"Required S3 Permissions"}),"\n",(0,r.jsx)(t.p,{children:"The role needs the following S3 permissions:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Permission"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"s3:GetObject"})}),(0,r.jsx)(t.td,{children:"Read objects from the bucket"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"s3:PutObject"})}),(0,r.jsx)(t.td,{children:"Write objects to the bucket"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"s3:DeleteObject"})}),(0,r.jsx)(t.td,{children:"Delete objects from the bucket"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"s3:ListBucket"})}),(0,r.jsx)(t.td,{children:"List objects in the bucket"})]})]})]}),"\n",(0,r.jsx)(t.admonition,{title:"Security Best Practice",type:"tip",children:(0,r.jsxs)(t.p,{children:["Always scope the IAM role permissions to the specific S3 bucket you want Momento to access. Avoid using ",(0,r.jsx)(t.code,{children:'Resource: "*"'})," in production environments."]})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h1,{id:"appendix-cloudwatch-iam-role-setup",children:"Appendix: CloudWatch IAM Role Setup"}),"\n",(0,r.jsx)(t.p,{children:"To enable access logging, you need to create an IAM role that allows Momento to write logs to your CloudWatch Log Group. The log group must already exist before creating the object store."}),"\n",(0,r.jsx)(t.h2,{id:"cloudformation-template-1",children:"CloudFormation Template"}),"\n",(0,r.jsx)(t.p,{children:"Below is a CloudFormation template that creates the required IAM role for CloudWatch access:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "AWSTemplateFormatVersion": "2010-09-09",\n  "Description": "IAM Role that allows Momento to write access logs to CloudWatch",\n  "Parameters": {\n    "LogGroupName": {\n      "Type": "String",\n      "Description": "The CloudWatch Log Group name where Momento will write access logs"\n    }\n  },\n  "Resources": {\n    "MomentoCloudWatchIamRole": {\n      "Type": "AWS::IAM::Role",\n      "Properties": {\n        "RoleName": "MomentoCloudWatchRole",\n        "Description": "IAM Role that allows Momento to write access logs to CloudWatch",\n        "AssumeRolePolicyDocument": {\n          "Version": "2012-10-17",\n          "Statement": [\n            {\n              "Effect": "Allow",\n              "Principal": {\n                "AWS": "arn:aws:iam::168253909317:root"\n              },\n              "Action": "sts:AssumeRole"\n            }\n          ]\n        },\n        "Policies": [\n          {\n            "PolicyName": "MomentoCloudWatchAccess",\n            "PolicyDocument": {\n              "Version": "2012-10-17",\n              "Statement": [\n                {\n                  "Sid": "AllowLogGroupAccess",\n                  "Effect": "Allow",\n                  "Action": [\n                    "logs:DescribeLogGroups"\n                  ],\n                  "Resource": "*"\n                },\n                {\n                  "Sid": "AllowLogStreamAccess",\n                  "Effect": "Allow",\n                  "Action": [\n                    "logs:CreateLogStream",\n                    "logs:PutLogEvents"\n                  ],\n                  "Resource": { "Fn::Sub": "arn:aws:logs:*:*:log-group:${LogGroupName}:*" }\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  },\n  "Outputs": {\n    "RoleArn": {\n      "Description": "The ARN of the IAM role to use for access logging",\n      "Value": { "Fn::GetAtt": ["MomentoCloudWatchIamRole", "Arn"] }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"deploying-the-template-1",children:"Deploying the Template"}),"\n",(0,r.jsx)(t.p,{children:"First, create the CloudWatch Log Group:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws logs create-log-group --log-group-name /momento/objectstore/my-store\n"})}),"\n",(0,r.jsx)(t.p,{children:"Then deploy the CloudFormation template:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws cloudformation create-stack \\\n  --stack-name momento-cloudwatch-role \\\n  --template-body file://momento-cloudwatch-role.json \\\n  --parameters ParameterKey=LogGroupName,ParameterValue=/momento/objectstore/my-store \\\n  --capabilities CAPABILITY_NAMED_IAM\n"})}),"\n",(0,r.jsx)(t.p,{children:"After the stack is created, retrieve the role ARN:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws cloudformation describe-stacks \\\n  --stack-name momento-cloudwatch-role \\\n  --query \"Stacks[0].Outputs[?OutputKey=='RoleArn'].OutputValue\" \\\n  --output text\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Use this ARN as the ",(0,r.jsx)(t.code,{children:"access_logging_config.cloudwatch.iam_role_arn"})," when creating your object store."]}),"\n",(0,r.jsx)(t.h2,{id:"required-cloudwatch-permissions",children:"Required CloudWatch Permissions"}),"\n",(0,r.jsx)(t.p,{children:"The role needs the following CloudWatch Logs permissions:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Permission"}),(0,r.jsx)(t.th,{children:"Purpose"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"logs:DescribeLogGroups"})}),(0,r.jsx)(t.td,{children:"Verify the log group exists"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"logs:CreateLogStream"})}),(0,r.jsx)(t.td,{children:"Create log streams for access logs"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"logs:PutLogEvents"})}),(0,r.jsx)(t.td,{children:"Write access log entries"})]})]})]}),"\n",(0,r.jsxs)(t.admonition,{title:"Log Retention",type:"tip",children:[(0,r.jsx)(t.p,{children:"Consider setting a retention policy on your CloudWatch Log Group to manage storage costs:"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"aws logs put-retention-policy \\\n  --log-group-name /momento/objectstore/my-store \\\n  --retention-in-days 30\n"})})]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);